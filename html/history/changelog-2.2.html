<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Change history for Celery 2.2 &#8212; Celery 3.1.25 documentation</title>
    
    <link rel="stylesheet" href="../_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.25',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="next" title="Change history for Celery 2.1" href="changelog-2.1.html" />
    <link rel="prev" title="Change history for Celery 2.3" href="changelog-2.3.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog-2.1.html" title="Change history for Celery 2.1"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="changelog-2.3.html" title="Change history for Celery 2.3"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Celery 3.1.25 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">History</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="deck">

    
        <p>
        This document describes the current stable version of Celery (3.1). For development docs,
        <a href="http://docs.celeryproject.org/en/master/history/changelog-2.2.html">go here</a>.
        </p>
    

</div>
    <div class="section" id="change-history-for-celery-2-2">
<span id="changelog-2-2"></span><h1>Change history for Celery 2.2<a class="headerlink" href="#change-history-for-celery-2-2" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><a class="reference internal" href="#version-2-2-8" id="id19">2.2.8</a><ul>
<li><a class="reference internal" href="#security-fixes" id="id20">Security Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-7" id="id21">2.2.7</a></li>
<li><a class="reference internal" href="#version-2-2-6" id="id22">2.2.6</a><ul>
<li><a class="reference internal" href="#important-notes" id="id23">Important Notes</a></li>
<li><a class="reference internal" href="#fixes" id="id24">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-5" id="id25">2.2.5</a><ul>
<li><a class="reference internal" href="#v225-important" id="id26">Important Notes</a></li>
<li><a class="reference internal" href="#news" id="id27">News</a></li>
<li><a class="reference internal" href="#v225-fixes" id="id28">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-4" id="id29">2.2.4</a><ul>
<li><a class="reference internal" href="#v224-fixes" id="id30">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-3" id="id31">2.2.3</a><ul>
<li><a class="reference internal" href="#v223-fixes" id="id32">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-2" id="id33">2.2.2</a><ul>
<li><a class="reference internal" href="#v222-fixes" id="id34">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-1" id="id35">2.2.1</a><ul>
<li><a class="reference internal" href="#v221-fixes" id="id36">Fixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#version-2-2-0" id="id37">2.2.0</a><ul>
<li><a class="reference internal" href="#v220-important" id="id38">Important Notes</a></li>
<li><a class="reference internal" href="#v220-news" id="id39">News</a></li>
<li><a class="reference internal" href="#v220-fixes" id="id40">Fixes</a></li>
<li><a class="reference internal" href="#experimental" id="id41">Experimental</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="version-2-2-8">
<span id="id1"></span><h2><a class="toc-backref" href="#id19">2.2.8</a><a class="headerlink" href="#version-2-2-8" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-11-25 04:00 P.M GMT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="security-fixes">
<span id="v228-security-fixes"></span><h3><a class="toc-backref" href="#id20">Security Fixes</a><a class="headerlink" href="#security-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">[Security: <a class="reference external" href="http://github.com/celery/celery/tree/master/docs/sec/CELERYSA-0001.txt">CELERYSA-0001</a>] Daemons would set effective id&#8217;s rather than
real id&#8217;s when the <a class="reference internal" href="../reference/celery.bin.base.html#cmdoption-uid"><code class="xref std std-option docutils literal"><span class="pre">--uid</span></code></a>/<a class="reference internal" href="../reference/celery.bin.base.html#cmdoption-gid"><code class="xref std std-option docutils literal"><span class="pre">--gid</span></code></a> arguments to
<strong class="program">celery multi</strong>, <strong class="program">celeryd_detach</strong>,
<strong class="program">celery beat</strong> and <strong class="program">celery events</strong> were used.</p>
<p>This means privileges weren&#8217;t properly dropped, and that it would
be possible to regain supervisor privileges later.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-7">
<span id="id2"></span><h2><a class="toc-backref" href="#id21">2.2.7</a><a class="headerlink" href="#version-2-2-7" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-06-13 04:00 P.M BST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">New signals: <a class="reference internal" href="../userguide/signals.html#std:signal-after_setup_logger"><code class="xref std std-signal docutils literal"><span class="pre">after_setup_logger</span></code></a> and
<a class="reference internal" href="../userguide/signals.html#std:signal-after_setup_task_logger"><code class="xref std std-signal docutils literal"><span class="pre">after_setup_task_logger</span></code></a></p>
<blockquote>
<div><p>These signals can be used to augment logging configuration
after Celery has set up logging.</p>
</div></blockquote>
</li>
<li><p class="first">Redis result backend now works with Redis 2.4.4.</p>
</li>
<li><p class="first">multi: The <a class="reference internal" href="../reference/celery.bin.base.html#cmdoption-gid"><code class="xref std std-option docutils literal"><span class="pre">--gid</span></code></a> option now works correctly.</p>
</li>
<li><p class="first">worker: Retry wrongfully used the repr of the traceback instead
of the string representation.</p>
</li>
<li><p class="first">App.config_from_object: Now loads module, not attribute of module.</p>
</li>
<li><p class="first">Fixed issue where logging of objects would give &#8220;&lt;Unrepresentable: ...&gt;&#8221;</p>
</li>
</ul>
</div>
<div class="section" id="version-2-2-6">
<span id="id3"></span><h2><a class="toc-backref" href="#id22">2.2.6</a><a class="headerlink" href="#version-2-2-6" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-04-15 04:00 P.M CEST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="important-notes">
<span id="v226-important"></span><h3><a class="toc-backref" href="#id23">Important Notes</a><a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Now depends on Kombu 1.1.2.</p>
</li>
<li><p class="first">Dependency lists now explicitly specifies that we don&#8217;t want python-dateutil
2.x, as this version only supports py3k.</p>
<blockquote>
<div><p>If you have installed dateutil 2.0 by accident you should downgrade
to the 1.5.0 version:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">U</span> <span class="n">python</span><span class="o">-</span><span class="n">dateutil</span><span class="o">==</span><span class="mf">1.5.0</span>
</pre></div>
</div>
<p>or by easy_install:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">easy_install</span> <span class="o">-</span><span class="n">U</span> <span class="n">python</span><span class="o">-</span><span class="n">dateutil</span><span class="o">==</span><span class="mf">1.5.0</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="fixes">
<span id="v226-fixes"></span><h3><a class="toc-backref" href="#id24">Fixes</a><a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The new <code class="docutils literal"><span class="pre">WatchedFileHandler</span></code> broke Python 2.5 support (<a class="reference external" href="https://github.com/celery/celery/issues/367"><span class="xref issue">Issue #367</span></a>).</p>
</li>
<li><p class="first">Task: Don&#8217;t use <code class="docutils literal"><span class="pre">app.main</span></code> if the task name is set explicitly.</p>
</li>
<li><p class="first">Sending emails did not work on Python 2.5, due to a bug in
the version detection code (<a class="reference external" href="https://github.com/celery/celery/issues/378"><span class="xref issue">Issue #378</span></a>).</p>
</li>
<li><p class="first">Beat: Adds method <code class="docutils literal"><span class="pre">ScheduleEntry._default_now</span></code></p>
<blockquote>
<div><p>This method can be overridden to change the default value
of <code class="docutils literal"><span class="pre">last_run_at</span></code>.</p>
</div></blockquote>
</li>
<li><p class="first">An error occurring in process cleanup could mask task errors.</p>
<p>We no longer propagate errors happening at process cleanup,
but log them instead.  This way they will not interfere with publishing
the task result (<a class="reference external" href="https://github.com/celery/celery/issues/365"><span class="xref issue">Issue #365</span></a>).</p>
</li>
<li><p class="first">Defining tasks did not work properly when using the Django
<code class="docutils literal"><span class="pre">shell_plus</span></code> utility (<a class="reference external" href="https://github.com/celery/celery/issues/366"><span class="xref issue">Issue #366</span></a>).</p>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">AsyncResult.get</span></code> did not accept the <code class="docutils literal"><span class="pre">interval</span></code> and <code class="docutils literal"><span class="pre">propagate</span></code></dt>
<dd><p class="first last">arguments.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>worker: Fixed a bug where the worker would not shutdown if a</dt>
<dd><p class="first last"><a class="reference external" href="https://docs.python.org/dev/library/socket.html#socket.error" title="(in Python v3.11)"><code class="xref py py-exc docutils literal"><span class="pre">socket.error</span></code></a> was raised.</p>
</dd>
</dl>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-5">
<span id="id4"></span><h2><a class="toc-backref" href="#id25">2.2.5</a><a class="headerlink" href="#version-2-2-5" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-03-28 06:00 P.M CEST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v225-important">
<span id="id5"></span><h3><a class="toc-backref" href="#id26">Important Notes</a><a class="headerlink" href="#v225-important" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Now depends on Kombu 1.0.7</li>
</ul>
</div>
<div class="section" id="news">
<span id="v225-news"></span><h3><a class="toc-backref" href="#id27">News</a><a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Our documentation is now hosted by Read The Docs
(<a class="reference external" href="http://docs.celeryproject.org">http://docs.celeryproject.org</a>), and all links have been changed to point to
the new URL.</p>
</li>
<li><p class="first">Logging: Now supports log rotation using external tools like <a class="reference external" href="http://www.ducea.com/2006/06/06/rotating-linux-log-files-part-2-logrotate/">logrotate.d</a>
(<a class="reference external" href="https://github.com/celery/celery/issues/321"><span class="xref issue">Issue #321</span></a>)</p>
<blockquote>
<div><p>This is accomplished by using the <code class="docutils literal"><span class="pre">WatchedFileHandler</span></code>, which re-opens
the file if it is renamed or deleted.</p>
</div></blockquote>
</li>
</ul>
<ul>
<li><dl class="first docutils">
<dt>otherqueues tutorial now documents how to configure Redis/Database result</dt>
<dd><p class="first last">backends.</p>
</dd>
</dl>
</li>
<li><p class="first">gevent: Now supports ETA tasks.</p>
<blockquote>
<div><p>But gevent still needs <code class="docutils literal"><span class="pre">CELERY_DISABLE_RATE_LIMITS=True</span></code> to work.</p>
</div></blockquote>
</li>
<li><p class="first">TaskSet User Guide: now contains TaskSet callback recipes.</p>
</li>
<li><p class="first">Eventlet: New signals:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">eventlet_pool_started</span></code></li>
<li><code class="docutils literal"><span class="pre">eventlet_pool_preshutdown</span></code></li>
<li><code class="docutils literal"><span class="pre">eventlet_pool_postshutdown</span></code></li>
<li><code class="docutils literal"><span class="pre">eventlet_pool_apply</span></code></li>
</ul>
<p>See <a class="reference internal" href="../reference/celery.signals.html#module-celery.signals" title="celery.signals"><code class="xref py py-mod docutils literal"><span class="pre">celery.signals</span></code></a> for more information.</p>
</div></blockquote>
</li>
<li><p class="first">New <a class="reference internal" href="../configuration.html#std:setting-BROKER_TRANSPORT_OPTIONS"><code class="xref std std-setting docutils literal"><span class="pre">BROKER_TRANSPORT_OPTIONS</span></code></a> setting can be used to pass
additional arguments to a particular broker transport.</p>
</li>
<li><p class="first">worker: <code class="docutils literal"><span class="pre">worker_pid</span></code> is now part of the request info as returned by
broadcast commands.</p>
</li>
<li><p class="first">TaskSet.apply/Taskset.apply_async now accepts an optional <code class="docutils literal"><span class="pre">taskset_id</span></code>
argument.</p>
</li>
<li><p class="first">The taskset_id (if any) is now available in the Task request context.</p>
</li>
<li><p class="first">SQLAlchemy result backend: taskset_id and taskset_id columns now have a
unique constraint.  (Tables need to recreated for this to take affect).</p>
</li>
<li><p class="first">Task Userguide: Added section about choosing a result backend.</p>
</li>
<li><p class="first">Removed unused attribute <code class="docutils literal"><span class="pre">AsyncResult.uuid</span></code>.</p>
</li>
</ul>
</div>
<div class="section" id="v225-fixes">
<span id="id6"></span><h3><a class="toc-backref" href="#id28">Fixes</a><a class="headerlink" href="#v225-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">multiprocessing.Pool:  Fixes race condition when marking job with
<code class="docutils literal"><span class="pre">WorkerLostError</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/268"><span class="xref issue">Issue #268</span></a>).</p>
<blockquote>
<div><p>The process may have published a result before it was terminated,
but we have no reliable way to detect that this is the case.</p>
<p>So we have to wait for 10 seconds before marking the result with
WorkerLostError.  This gives the result handler a chance to retrieve the
result.</p>
</div></blockquote>
</li>
<li><p class="first">multiprocessing.Pool: Shutdown could hang if rate limits disabled.</p>
<blockquote>
<div><p>There was a race condition when the MainThread was waiting for the pool
semaphore to be released.  The ResultHandler now terminates after 5
seconds if there are unacked jobs, but no worker processes left to start
them  (it needs to timeout because there could still be an ack+result
that we haven&#8217;t consumed from the result queue. It
is unlikely we will receive any after 5 seconds with no worker processes).</p>
</div></blockquote>
</li>
<li><p class="first">celerybeat: Now creates pidfile even if the <code class="docutils literal"><span class="pre">--detach</span></code> option is not set.</p>
</li>
<li><p class="first">eventlet/gevent: The broadcast command consumer is now running in a separate
greenthread.</p>
<blockquote>
<div><p>This ensures broadcast commands will take priority even if there are many
active tasks.</p>
</div></blockquote>
</li>
<li><p class="first">Internal module <code class="docutils literal"><span class="pre">celery.worker.controllers</span></code> renamed to
<code class="docutils literal"><span class="pre">celery.worker.mediator</span></code>.</p>
</li>
<li><p class="first">worker: Threads now terminates the program by calling <code class="docutils literal"><span class="pre">os._exit</span></code>, as it
is the only way to ensure exit in the case of syntax errors, or other
unrecoverable errors.</p>
</li>
<li><p class="first">Fixed typo in <code class="docutils literal"><span class="pre">maybe_timedelta</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/352"><span class="xref issue">Issue #352</span></a>).</p>
</li>
<li><p class="first">worker: Broadcast commands now logs with loglevel debug instead of warning.</p>
</li>
<li><p class="first">AMQP Result Backend: Now resets cached channel if the connection is lost.</p>
</li>
<li><p class="first">Polling results with the AMQP result backend was not working properly.</p>
</li>
<li><p class="first">Rate limits: No longer sleeps if there are no tasks, but rather waits for
the task received condition (Performance improvement).</p>
</li>
<li><p class="first">ConfigurationView: <code class="docutils literal"><span class="pre">iter(dict)</span></code> should return keys, not items (<a class="reference external" href="https://github.com/celery/celery/issues/362"><span class="xref issue">Issue #362</span></a>).</p>
</li>
<li><p class="first">celerybeat:  PersistentScheduler now automatically removes a corrupted
schedule file (<a class="reference external" href="https://github.com/celery/celery/issues/346"><span class="xref issue">Issue #346</span></a>).</p>
</li>
<li><p class="first">Programs that doesn&#8217;t support positional command-line arguments now provides
a user friendly error message.</p>
</li>
<li><p class="first">Programs no longer tries to load the configuration file when showing
<code class="docutils literal"><span class="pre">--version</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/347"><span class="xref issue">Issue #347</span></a>).</p>
</li>
<li><p class="first">Autoscaler: The &#8220;all processes busy&#8221; log message is now severity debug
instead of error.</p>
</li>
<li><p class="first">worker: If the message body can&#8217;t be decoded, it is now passed through
<code class="docutils literal"><span class="pre">safe_str</span></code> when logging.</p>
<blockquote>
<div><p>This to ensure we don&#8217;t get additional decoding errors when trying to log
the failure.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">app.config_from_object</span></code>/<code class="docutils literal"><span class="pre">app.config_from_envvar</span></code> now works for all
loaders.</p>
</li>
<li><p class="first">Now emits a user-friendly error message if the result backend name is
unknown (<a class="reference external" href="https://github.com/celery/celery/issues/349"><span class="xref issue">Issue #349</span></a>).</p>
</li>
<li><p class="first"><a class="reference internal" href="../reference/celery.contrib.batches.html#module-celery.contrib.batches" title="celery.contrib.batches"><code class="xref py py-mod docutils literal"><span class="pre">celery.contrib.batches</span></code></a>: Now sets loglevel and logfile in the task
request so <code class="docutils literal"><span class="pre">task.get_logger</span></code> works with batch tasks (<a class="reference external" href="https://github.com/celery/celery/issues/357"><span class="xref issue">Issue #357</span></a>).</p>
</li>
<li><p class="first">worker: An exception was raised if using the amqp transport and the prefetch
count value exceeded 65535 (<a class="reference external" href="https://github.com/celery/celery/issues/359"><span class="xref issue">Issue #359</span></a>).</p>
<blockquote>
<div><p>The prefetch count is incremented for every received task with an
ETA/countdown defined.  The prefetch count is a short, so can only support
a maximum value of 65535.  If the value exceeds the maximum value we now
disable the prefetch count, it is re-enabled as soon as the value is below
the limit again.</p>
</div></blockquote>
</li>
<li><p class="first">cursesmon: Fixed unbound local error (<a class="reference external" href="https://github.com/celery/celery/issues/303"><span class="xref issue">Issue #303</span></a>).</p>
</li>
<li><p class="first">eventlet/gevent is now imported on demand so autodoc can import the modules
without having eventlet/gevent installed.</p>
</li>
<li><p class="first">worker: Ack callback now properly handles <code class="docutils literal"><span class="pre">AttributeError</span></code>.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">Task.after_return</span></code> is now always called <em>after</em> the result has been
written.</p>
</li>
<li><p class="first">Cassandra Result Backend: Should now work with the latest <code class="docutils literal"><span class="pre">pycassa</span></code>
version.</p>
</li>
<li><p class="first">multiprocessing.Pool: No longer cares if the putlock semaphore is released
too many times. (this can happen if one or more worker processes are
killed).</p>
</li>
<li><p class="first">SQLAlchemy Result Backend: Now returns accidentally removed <code class="docutils literal"><span class="pre">date_done</span></code> again
(<a class="reference external" href="https://github.com/celery/celery/issues/325"><span class="xref issue">Issue #325</span></a>).</p>
</li>
<li><p class="first">Task.request contex is now always initialized to ensure calling the task
function directly works even if it actively uses the request context.</p>
</li>
<li><p class="first">Exception occuring when iterating over the result from <code class="docutils literal"><span class="pre">TaskSet.apply</span></code>
fixed.</p>
</li>
<li><p class="first">eventlet: Now properly schedules tasks with an ETA in the past.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-4">
<span id="id7"></span><h2><a class="toc-backref" href="#id29">2.2.4</a><a class="headerlink" href="#version-2-2-4" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-02-19 00:00 AM CET</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v224-fixes">
<span id="id8"></span><h3><a class="toc-backref" href="#id30">Fixes</a><a class="headerlink" href="#v224-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>worker: 2.2.3 broke error logging, resulting in tracebacks not being logged.</li>
<li>AMQP result backend: Polling task states did not work properly if there were
more than one result message in the queue.</li>
<li><code class="docutils literal"><span class="pre">TaskSet.apply_async()</span></code> and <code class="docutils literal"><span class="pre">TaskSet.apply()</span></code> now supports an optional
<code class="docutils literal"><span class="pre">taskset_id</span></code> keyword argument (<a class="reference external" href="https://github.com/celery/celery/issues/331"><span class="xref issue">Issue #331</span></a>).</li>
<li>The current taskset id (if any) is now available in the task context as
<code class="docutils literal"><span class="pre">request.taskset</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/329"><span class="xref issue">Issue #329</span></a>).</li>
<li>SQLAlchemy result backend: <cite>date_done</cite> was no longer part of the results as it had
been accidentally removed.  It is now available again (<a class="reference external" href="https://github.com/celery/celery/issues/325"><span class="xref issue">Issue #325</span></a>).</li>
<li>SQLAlchemy result backend: Added unique constraint on <cite>Task.id</cite> and
<cite>TaskSet.taskset_id</cite>.  Tables needs to be recreated for this to take effect.</li>
<li>Fixed exception raised when iterating on the result of <code class="docutils literal"><span class="pre">TaskSet.apply()</span></code>.</li>
<li>Tasks Userguide: Added section on choosing a result backend.</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-3">
<span id="id9"></span><h2><a class="toc-backref" href="#id31">2.2.3</a><a class="headerlink" href="#version-2-2-3" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-02-12 04:00 P.M CET</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v223-fixes">
<span id="id10"></span><h3><a class="toc-backref" href="#id32">Fixes</a><a class="headerlink" href="#v223-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Now depends on Kombu 1.0.3</p>
</li>
<li><p class="first">Task.retry now supports a <code class="docutils literal"><span class="pre">max_retries</span></code> argument, used to change the
default value.</p>
</li>
<li><p class="first"><cite>multiprocessing.cpu_count</cite> may raise <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#NotImplementedError" title="(in Python v3.11)"><code class="xref py py-exc docutils literal"><span class="pre">NotImplementedError</span></code></a> on
platforms where this is not supported (<a class="reference external" href="https://github.com/celery/celery/issues/320"><span class="xref issue">Issue #320</span></a>).</p>
</li>
<li><p class="first">Coloring of log messages broke if the logged object was not a string.</p>
</li>
<li><p class="first">Fixed several typos in the init script documentation.</p>
</li>
<li><p class="first">A regression caused <cite>Task.exchange</cite> and <cite>Task.routing_key</cite> to no longer
have any effect.  This is now fixed.</p>
</li>
<li><p class="first">Routing Userguide: Fixes typo, routers in <a class="reference internal" href="../configuration.html#std:setting-CELERY_ROUTES"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_ROUTES</span></code></a> must be
instances, not classes.</p>
</li>
<li><p class="first"><strong class="program">celeryev</strong> did not create pidfile even though the
<a class="reference internal" href="../reference/celery.bin.base.html#cmdoption-pidfile"><code class="xref std std-option docutils literal"><span class="pre">--pidfile</span></code></a> argument was set.</p>
</li>
<li><p class="first">Task logger format was no longer used. (<a class="reference external" href="https://github.com/celery/celery/issues/317"><span class="xref issue">Issue #317</span></a>).</p>
<blockquote>
<div><p>The id and name of the task is now part of the log message again.</p>
</div></blockquote>
</li>
<li><p class="first">A safe version of <code class="docutils literal"><span class="pre">repr()</span></code> is now used in strategic places to ensure
objects with a broken <code class="docutils literal"><span class="pre">__repr__</span></code> does not crash the worker, or otherwise
make errors hard to understand (<a class="reference external" href="https://github.com/celery/celery/issues/298"><span class="xref issue">Issue #298</span></a>).</p>
</li>
<li><p class="first">Remote control command <a class="reference internal" href="../userguide/workers.html#std:control-active_queues"><code class="xref std std-control docutils literal"><span class="pre">active_queues</span></code></a>: did not account for queues added
at runtime.</p>
<blockquote>
<div><p>In addition the dictionary replied by this command now has a different
structure: the exchange key is now a dictionary containing the
exchange declaration in full.</p>
</div></blockquote>
</li>
<li><p class="first">The <code class="xref std std-option docutils literal"><span class="pre">-Q</span></code> option to <strong class="program">celery worker</strong> removed unused queue
declarations, so routing of tasks could fail.</p>
<blockquote>
<div><p>Queues are no longer removed, but rather <cite>app.amqp.queues.consume_from()</cite>
is used as the list of queues to consume from.</p>
<p>This ensures all queues are available for routing purposes.</p>
</div></blockquote>
</li>
<li><p class="first">celeryctl: Now supports the <cite>inspect active_queues</cite> command.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-2">
<span id="id11"></span><h2><a class="toc-backref" href="#id33">2.2.2</a><a class="headerlink" href="#version-2-2-2" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-02-03 04:00 P.M CET</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v222-fixes">
<span id="id12"></span><h3><a class="toc-backref" href="#id34">Fixes</a><a class="headerlink" href="#v222-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Celerybeat could not read the schedule properly, so entries in
<a class="reference internal" href="../configuration.html#std:setting-CELERYBEAT_SCHEDULE"><code class="xref std std-setting docutils literal"><span class="pre">CELERYBEAT_SCHEDULE</span></code></a> would not be scheduled.</p>
</li>
<li><p class="first">Task error log message now includes <cite>exc_info</cite> again.</p>
</li>
<li><p class="first">The <cite>eta</cite> argument can now be used with <cite>task.retry</cite>.</p>
<blockquote>
<div><p>Previously it was overwritten by the countdown argument.</p>
</div></blockquote>
</li>
<li><p class="first">celery multi/celeryd_detach: Now logs errors occuring when executing
the <cite>celery worker</cite> command.</p>
</li>
<li><p class="first">daemonizing tutorial: Fixed typo <code class="docutils literal"><span class="pre">--time-limit</span> <span class="pre">300</span></code> -&gt;
<code class="docutils literal"><span class="pre">--time-limit=300</span></code></p>
</li>
<li><p class="first">Colors in logging broke non-string objects in log messages.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">setup_task_logger</span></code> no longer makes assumptions about magic task kwargs.</p>
</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-1">
<span id="id13"></span><h2><a class="toc-backref" href="#id35">2.2.1</a><a class="headerlink" href="#version-2-2-1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-02-02 04:00 P.M CET</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v221-fixes">
<span id="id14"></span><h3><a class="toc-backref" href="#id36">Fixes</a><a class="headerlink" href="#v221-fixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Eventlet pool was leaking memory (<a class="reference external" href="https://github.com/celery/celery/issues/308"><span class="xref issue">Issue #308</span></a>).</li>
<li>Deprecated function <code class="docutils literal"><span class="pre">celery.execute.delay_task</span></code> was accidentally removed,
now available again.</li>
<li><code class="docutils literal"><span class="pre">BasePool.on_terminate</span></code> stub did not exist</li>
<li><dl class="first docutils">
<dt>celeryd_detach: Adds readable error messages if user/group name does not</dt>
<dd>exist.</dd>
</dl>
</li>
<li>Smarter handling of unicode decod errors when logging errors.</li>
</ul>
</div>
</div>
<div class="section" id="version-2-2-0">
<span id="id15"></span><h2><a class="toc-backref" href="#id37">2.2.0</a><a class="headerlink" href="#version-2-2-0" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2011-02-01 10:00 AM CET</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="v220-important">
<span id="id16"></span><h3><a class="toc-backref" href="#id38">Important Notes</a><a class="headerlink" href="#v220-important" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Carrot has been replaced with <a class="reference external" href="http://pypi.python.org/pypi/kombu">Kombu</a></p>
<blockquote>
<div><p>Kombu is the next generation messaging library for Python,
fixing several flaws present in Carrot that was hard to fix
without breaking backwards compatibility.</p>
<p>Also it adds:</p>
<ul class="simple">
<li>First-class support for virtual transports; Redis, Django ORM,
SQLAlchemy, Beanstalk, MongoDB, CouchDB and in-memory.</li>
<li>Consistent error handling with introspection,</li>
<li>The ability to ensure that an operation is performed by gracefully
handling connection and channel errors,</li>
<li>Message compression (zlib, bzip2, or custom compression schemes).</li>
</ul>
<p>This means that <cite>ghettoq</cite> is no longer needed as the
functionality it provided is already available in Celery by default.
The virtual transports are also more feature complete with support
for exchanges (direct and topic).  The Redis transport even supports
fanout exchanges so it is able to perform worker remote control
commands.</p>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first">Magic keyword arguments pending deprecation.</p>
<blockquote>
<div><p>The magic keyword arguments were responsibile for many problems
and quirks: notably issues with tasks and decorators, and name
collisions in keyword arguments for the unaware.</p>
<p>It wasn&#8217;t easy to find a way to deprecate the magic keyword arguments,
but we think this is a solution that makes sense and it will not
have any adverse effects for existing code.</p>
<p>The path to a magic keyword argument free world is:</p>
<blockquote>
<div><ul class="simple">
<li>the <cite>celery.decorators</cite> module is deprecated and the decorators
can now be found in <cite>celery.task</cite>.</li>
<li>The decorators in <cite>celery.task</cite> disables keyword arguments by
default</li>
<li>All examples in the documentation have been changed to use
<cite>celery.task</cite>.</li>
</ul>
<p>This means that the following will have magic keyword arguments
enabled (old style):</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.decorators</span> <span class="kn">import</span> <span class="n">task</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In task </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;task_id&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div></blockquote>
<p>And this will not use magic keyword arguments (new style):</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">task</span>

<span class="nd">@task</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;In task </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">add</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div></blockquote>
</div></blockquote>
<p>In addition, tasks can choose not to accept magic keyword arguments by
setting the <cite>task.accept_magic_kwargs</cite> attribute.</p>
<div class="admonition-deprecation admonition">
<p class="first admonition-title">Deprecation</p>
<p>Using the decorators in <code class="xref py py-mod docutils literal"><span class="pre">celery.decorators</span></code> emits a
<a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#PendingDeprecationWarning" title="(in Python v3.11)"><code class="xref py py-class docutils literal"><span class="pre">PendingDeprecationWarning</span></code></a> with a helpful message urging
you to change your code, in version 2.4 this will be replaced with
a <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#DeprecationWarning" title="(in Python v3.11)"><code class="xref py py-class docutils literal"><span class="pre">DeprecationWarning</span></code></a>, and in version 4.0 the
<code class="xref py py-mod docutils literal"><span class="pre">celery.decorators</span></code> module will be removed and no longer exist.</p>
<p class="last">Similarly, the <cite>task.accept_magic_kwargs</cite> attribute will no
longer have any effect starting from version 4.0.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">The magic keyword arguments are now available as <cite>task.request</cite></p>
<blockquote>
<div><p>This is called <em>the context</em>.  Using thread-local storage the
context contains state that is related to the current request.</p>
<p>It is mutable and you can add custom attributes that will only be seen
by the current task request.</p>
<p>The following context attributes are always available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><strong>Magic Keyword Argument</strong></th>
<th class="head"><strong>Replace with</strong></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><cite>kwargs[&#8220;task_id&#8221;]</cite></td>
<td><cite>self.request.id</cite></td>
</tr>
<tr class="row-odd"><td><cite>kwargs[&#8220;delivery_info&#8221;]</cite></td>
<td><cite>self.request.delivery_info</cite></td>
</tr>
<tr class="row-even"><td><cite>kwargs[&#8220;task_retries&#8221;]</cite></td>
<td><cite>self.request.retries</cite></td>
</tr>
<tr class="row-odd"><td><cite>kwargs[&#8220;logfile&#8221;]</cite></td>
<td><cite>self.request.logfile</cite></td>
</tr>
<tr class="row-even"><td><cite>kwargs[&#8220;loglevel&#8221;]</cite></td>
<td><cite>self.request.loglevel</cite></td>
</tr>
<tr class="row-odd"><td><cite>kwargs[&#8220;task_is_eager</cite></td>
<td><cite>self.request.is_eager</cite></td>
</tr>
<tr class="row-even"><td><strong>NEW</strong></td>
<td><cite>self.request.args</cite></td>
</tr>
<tr class="row-odd"><td><strong>NEW</strong></td>
<td><cite>self.request.kwargs</cite></td>
</tr>
</tbody>
</table>
<p>In addition, the following methods now automatically uses the current
context, so you don&#8217;t have to pass <cite>kwargs</cite> manually anymore:</p>
<blockquote>
<div><ul class="simple">
<li><cite>task.retry</cite></li>
<li><cite>task.get_logger</cite></li>
<li><cite>task.update_state</cite></li>
</ul>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first"><a class="reference external" href="http://eventlet.net">Eventlet</a> support.</p>
<blockquote>
<div><p>This is great news for I/O-bound tasks!</p>
<p>To change pool implementations you use the <code class="xref std std-option docutils literal"><span class="pre">-P|--pool</span></code> argument
to <strong class="program">celery worker</strong>, or globally using the
<a class="reference internal" href="../configuration.html#std:setting-CELERYD_POOL"><code class="xref std std-setting docutils literal"><span class="pre">CELERYD_POOL</span></code></a> setting.  This can be the full name of a class,
or one of the following aliases: <cite>processes</cite>, <cite>eventlet</cite>, <cite>gevent</cite>.</p>
<p>For more information please see the <a class="reference internal" href="../userguide/concurrency/eventlet.html#concurrency-eventlet"><span class="std std-ref">Concurrency with Eventlet</span></a> section
in the User Guide.</p>
<div class="admonition-why-not-gevent admonition">
<p class="first admonition-title">Why not gevent?</p>
<p>For our first alternative concurrency implementation we have focused
on <a class="reference external" href="http://eventlet.net">Eventlet</a>, but there is also an experimental <a class="reference external" href="http://gevent.org">gevent</a> pool
available. This is missing some features, notably the ability to
schedule ETA tasks.</p>
<p class="last">Hopefully the <a class="reference external" href="http://gevent.org">gevent</a> support will be feature complete by
version 2.3, but this depends on user demand (and contributions).</p>
</div>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first">Python 2.4 support deprecated!</p>
<blockquote>
<div><p>We&#8217;re happy^H^H^H^H^Hsad to announce that this is the last version
to support Python 2.4.</p>
<p>You are urged to make some noise if you&#8217;re currently stuck with
Python 2.4.  Complain to your package maintainers, sysadmins and bosses:
tell them it&#8217;s time to move on!</p>
<p>Apart from wanting to take advantage of with-statements, coroutines,
conditional expressions and enhanced try blocks, the code base
now contains so many 2.4 related hacks and workarounds it&#8217;s no longer
just a compromise, but a sacrifice.</p>
<p>If it really isn&#8217;t your choice, and you don&#8217;t have the option to upgrade
to a newer version of Python, you can just continue to use Celery 2.2.
Important fixes can be backported for as long as there is interest.</p>
</div></blockquote>
</li>
<li><p class="first">worker: Now supports Autoscaling of child worker processes.</p>
<blockquote>
<div><p>The <code class="xref std std-option docutils literal"><span class="pre">--autoscale</span></code> option can be used to configure the minimum
and maximum number of child worker processes:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">autoscale</span><span class="o">=</span><span class="n">AUTOSCALE</span>
     <span class="n">Enable</span> <span class="n">autoscaling</span> <span class="n">by</span> <span class="n">providing</span>
     <span class="n">max_concurrency</span><span class="p">,</span><span class="n">min_concurrency</span><span class="o">.</span>  <span class="n">Example</span><span class="p">:</span>
       <span class="o">--</span><span class="n">autoscale</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="mi">3</span> <span class="p">(</span><span class="n">always</span> <span class="n">keep</span> <span class="mi">3</span> <span class="n">processes</span><span class="p">,</span> <span class="n">but</span> <span class="n">grow</span> <span class="n">to</span>
      <span class="mi">10</span> <span class="k">if</span> <span class="n">necessary</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Remote Debugging of Tasks</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">celery.contrib.rdb</span></code> is an extended version of <a class="reference external" href="https://docs.python.org/dev/library/pdb.html#module-pdb" title="(in Python v3.11)"><code class="xref py py-mod docutils literal"><span class="pre">pdb</span></code></a> that
enables remote debugging of processes that does not have terminal
access.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>    from celery.contrib import rdb
    from celery.task import task

    @task()
    def add(x, y):
        result = x + y
        rdb.set_trace()  # &lt;- set breakpoint
        return result


:func:`~celery.contrib.rdb.set_trace` sets a breakpoint at the current
location and creates a socket you can telnet into to remotely debug
your task.

The debugger may be started by multiple processes at the same time,
so rather than using a fixed port the debugger will search for an
available port, starting from the base port (6900 by default).
The base port can be changed using the environment variable
:envvar:`CELERY_RDB_PORT`.

By default the debugger will only be available from the local host,
to enable access from the outside you have to set the environment
variable :envvar:`CELERY_RDB_HOST`.

When the worker encounters your breakpoint it will log the following
information::

    [INFO/MainProcess] Received task:
        tasks.add[d7261c71-4962-47e5-b342-2448bedd20e8]
    [WARNING/PoolWorker-1] Remote Debugger:6900:
        Please telnet 127.0.0.1 6900.  Type `exit` in session to continue.
    [2011-01-18 14:25:44,119: WARNING/PoolWorker-1] Remote Debugger:6900:
        Waiting for client...

If you telnet the port specified you will be presented
with a ``pdb`` shell:

.. code-block:: bash

    $ telnet localhost 6900
    Connected to localhost.
    Escape character is &#39;^]&#39;.
    &gt; /opt/devel/demoapp/tasks.py(128)add()
    -&gt; return result
    (Pdb)

Enter ``help`` to get a list of available commands,
It may be a good idea to read the `Python Debugger Manual`_ if
you have never used `pdb` before.
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first">Events are now transient and is using a topic exchange (instead of direct).</p>
<blockquote>
<div><p>The <cite>CELERYD_EVENT_EXCHANGE</cite>, <cite>CELERYD_EVENT_ROUTING_KEY</cite>,
<cite>CELERYD_EVENT_EXCHANGE_TYPE</cite> settings are no longer in use.</p>
<p>This means events will not be stored until there is a consumer, and the
events will be gone as soon as the consumer stops.  Also it means there
can be multiple monitors running at the same time.</p>
<p>The routing key of an event is the type of event (e.g. <cite>worker.started</cite>,
<cite>worker.heartbeat</cite>, <cite>task.succeeded</cite>, etc.  This means a consumer can
filter on specific types, to only be alerted of the events it cares about.</p>
<p>Each consumer will create a unique queue, meaning it is in effect a
broadcast exchange.</p>
<p>This opens up a lot of possibilities, for example the workers could listen
for worker events to know what workers are in the neighborhood, and even
restart workers when they go down (or use this information to optimize
tasks/autoscaling).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The event exchange has been renamed from &#8220;celeryevent&#8221; to &#8220;celeryev&#8221;
so it does not collide with older versions.</p>
<p>If you would like to remove the old exchange you can do so
by executing the following command:</p>
<div class="last highlight-bash"><div class="highlight"><pre><span></span>$ camqadm exchange.delete celeryevent
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><p class="first">The worker now starts without configuration, and configuration can be
specified directly on the command-line.</p>
<p>Configuration options must appear after the last argument, separated
by two dashes:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ celery worker -l info -I tasks -- broker.host<span class="o">=</span>localhost broker.vhost<span class="o">=</span>/app
</pre></div>
</div>
</li>
<li><p class="first">Configuration is now an alias to the original configuration, so changes
to the original will reflect Celery at runtime.</p>
</li>
<li><p class="first"><cite>celery.conf</cite> has been deprecated, and modifying <cite>celery.conf.ALWAYS_EAGER</cite>
will no longer have any effect.</p>
<blockquote>
<div><p>The default configuration is now available in the
<a class="reference internal" href="../reference/celery.app.defaults.html#module-celery.app.defaults" title="celery.app.defaults"><code class="xref py py-mod docutils literal"><span class="pre">celery.app.defaults</span></code></a> module.  The available configuration options
and their types can now be introspected.</p>
</div></blockquote>
</li>
<li><p class="first">Remote control commands are now provided by <cite>kombu.pidbox</cite>, the generic
process mailbox.</p>
</li>
<li><p class="first">Internal module <cite>celery.worker.listener</cite> has been renamed to
<cite>celery.worker.consumer</cite>, and <cite>.CarrotListener</cite> is now <cite>.Consumer</cite>.</p>
</li>
<li><p class="first">Previously deprecated modules <cite>celery.models</cite> and
<cite>celery.management.commands</cite> have now been removed as per the deprecation
timeline.</p>
</li>
<li><dl class="first docutils">
<dt>[Security: Low severity] Removed <cite>celery.task.RemoteExecuteTask</cite> and</dt>
<dd><p class="first">accompanying functions: <cite>dmap</cite>, <cite>dmap_async</cite>, and <cite>execute_remote</cite>.</p>
<p>Executing arbitrary code using pickle is a potential security issue if
someone gains unrestricted access to the message broker.</p>
<p class="last">If you really need this functionality, then you would have to add
this to your own project.</p>
</dd>
</dl>
</li>
<li><p class="first">[Security: Low severity] The <cite>stats</cite> command no longer transmits the
broker password.</p>
<blockquote>
<div><p>One would have needed an authenticated broker connection to receive
this password in the first place, but sniffing the password at the
wire level would have been possible if using unencrypted communication.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="v220-news">
<span id="id17"></span><h3><a class="toc-backref" href="#id39">News</a><a class="headerlink" href="#v220-news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">The internal module <cite>celery.task.builtins</cite> has been removed.</p>
</li>
<li><p class="first">The module <cite>celery.task.schedules</cite> is deprecated, and
<cite>celery.schedules</cite> should be used instead.</p>
<blockquote>
<div><p>For example if you have:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.task.schedules</span> <span class="kn">import</span> <span class="n">crontab</span>
</pre></div>
</div>
<p>You should replace that with:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.schedules</span> <span class="kn">import</span> <span class="n">crontab</span>
</pre></div>
</div>
<p>The module needs to be renamed because it must be possible
to import schedules without importing the <cite>celery.task</cite> module.</p>
</div></blockquote>
</li>
<li><p class="first">The following functions have been deprecated and is scheduled for
removal in version 2.3:</p>
<blockquote>
<div><ul>
<li><p class="first"><cite>celery.execute.apply_async</cite></p>
<blockquote>
<div><p>Use <cite>task.apply_async()</cite> instead.</p>
</div></blockquote>
</li>
<li><p class="first"><cite>celery.execute.apply</cite></p>
<blockquote>
<div><p>Use <cite>task.apply()</cite> instead.</p>
</div></blockquote>
</li>
<li><p class="first"><cite>celery.execute.delay_task</cite></p>
<blockquote>
<div><p>Use <cite>registry.tasks[name].delay()</cite> instead.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Importing <cite>TaskSet</cite> from <cite>celery.task.base</cite> is now deprecated.</p>
<blockquote>
<div><p>You should use:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">TaskSet</span>
</pre></div>
</div>
<p>instead.</p>
</div></blockquote>
</li>
<li><p class="first">New remote control commands:</p>
<blockquote>
<div><ul>
<li><p class="first"><cite>active_queues</cite></p>
<blockquote>
<div><p>Returns the queue declarations a worker is currently consuming from.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Added the ability to retry publishing the task message in
the event of connection loss or failure.</p>
<blockquote>
<div><p>This is disabled by default but can be enabled using the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_TASK_PUBLISH_RETRY"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_PUBLISH_RETRY</span></code></a> setting, and tweaked by
the <a class="reference internal" href="../configuration.html#std:setting-CELERY_TASK_PUBLISH_RETRY_POLICY"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_TASK_PUBLISH_RETRY_POLICY</span></code></a> setting.</p>
<p>In addition <cite>retry</cite>, and <cite>retry_policy</cite> keyword arguments have
been added to <cite>Task.apply_async</cite>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using the <cite>retry</cite> argument to <cite>apply_async</cite> requires you to
handle the publisher/connection manually.</p>
</div>
</div></blockquote>
</li>
<li><p class="first">Periodic Task classes (<cite>&#64;periodic_task</cite>/<cite>PeriodicTask</cite>) will <em>not</em> be
deprecated as previously indicated in the source code.</p>
<blockquote>
<div><p>But you are encouraged to use the more flexible
<a class="reference internal" href="../configuration.html#std:setting-CELERYBEAT_SCHEDULE"><code class="xref std std-setting docutils literal"><span class="pre">CELERYBEAT_SCHEDULE</span></code></a> setting.</p>
</div></blockquote>
</li>
<li><p class="first">Built-in daemonization support of the worker using <cite>celery multi</cite>
is no longer experimental and is considered production quality.</p>
<blockquote>
<div><p>See <a class="reference internal" href="../tutorials/daemonizing.html#daemon-generic"><span class="std std-ref">Generic init scripts</span></a> if you want to use the new generic init
scripts.</p>
</div></blockquote>
</li>
<li><p class="first">Added support for message compression using the
<a class="reference internal" href="../configuration.html#std:setting-CELERY_MESSAGE_COMPRESSION"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_MESSAGE_COMPRESSION</span></code></a> setting, or the <cite>compression</cite> argument
to <cite>apply_async</cite>.  This can also be set using routers.</p>
</li>
<li><dl class="first docutils">
<dt>worker: Now logs stacktrace of all threads when receiving the</dt>
<dd><p class="first"><cite>SIGUSR1</cite> signal.  (Does not work on cPython 2.4, Windows or Jython).</p>
<blockquote class="last">
<div><p>Inspired by <a class="reference external" href="https://gist.github.com/737056">https://gist.github.com/737056</a></p>
</div></blockquote>
</dd>
</dl>
</li>
<li><p class="first">Can now remotely terminate/kill the worker process currently processing
a task.</p>
<blockquote>
<div><p>The <cite>revoke</cite> remote control command now supports a <cite>terminate</cite> argument
Default signal is <cite>TERM</cite>, but can be specified using the <cite>signal</cite>
argument. Signal can be the uppercase name of any signal defined
in the <a class="reference external" href="https://docs.python.org/dev/library/signal.html#module-signal" title="(in Python v3.11)"><code class="xref py py-mod docutils literal"><span class="pre">signal</span></code></a> module in the Python Standard Library.</p>
<p>Terminating a task also revokes it.</p>
<p>Example:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">celery.task.control</span> <span class="kn">import</span> <span class="n">revoke</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="s2">&quot;KILL&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">revoke</span><span class="p">(</span><span class="n">task_id</span><span class="p">,</span> <span class="n">terminate</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">signal</span><span class="o">=</span><span class="s2">&quot;SIGKILL&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><cite>TaskSetResult.join_native</cite>: Backend-optimized version of <cite>join()</cite>.</p>
<blockquote>
<div><p>If available, this version uses the backends ability to retrieve
multiple results at once, unlike <cite>join()</cite> which fetches the results
one by one.</p>
<p>So far only supported by the AMQP result backend.  Support for memcached
and Redis may be added later.</p>
</div></blockquote>
</li>
<li><p class="first">Improved implementations of <cite>TaskSetResult.join</cite> and <cite>AsyncResult.wait</cite>.</p>
<blockquote>
<div><p>An <cite>interval</cite> keyword argument have been added to both so the
polling interval can be specified (default interval is 0.5 seconds).</p>
<blockquote>
<div><p>A <cite>propagate</cite> keyword argument have been added to <cite>result.wait()</cite>,
errors will be returned instead of raised if this is set to False.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You should decrease the polling interval when using the database
result backend, as frequent polling can result in high database load.</p>
</div>
</div></blockquote>
</div></blockquote>
</li>
<li><p class="first">The PID of the child worker process accepting a task is now sent as a field
with the <a class="reference internal" href="../userguide/monitoring.html#std:event-task-started"><code class="xref std std-event docutils literal"><span class="pre">task-started</span></code></a> event.</p>
</li>
<li><p class="first">The following fields have been added to all events in the worker class:</p>
<blockquote>
<div><ul class="simple">
<li><cite>sw_ident</cite>: Name of worker software (e.g. py-celery).</li>
<li><cite>sw_ver</cite>: Software version (e.g. 2.2.0).</li>
<li><cite>sw_sys</cite>: Operating System (e.g. Linux, Windows, Darwin).</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">For better accuracy the start time reported by the multiprocessing worker
process is used when calculating task duration.</p>
<blockquote>
<div><p>Previously the time reported by the accept callback was used.</p>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><cite>celerybeat</cite>: New built-in daemonization support using the <cite>&#8211;detach</cite></dt>
<dd><p class="first last">option.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><cite>celeryev</cite>: New built-in daemonization support using the <cite>&#8211;detach</cite></dt>
<dd><p class="first last">option.</p>
</dd>
</dl>
</li>
<li><p class="first"><cite>TaskSet.apply_async</cite>: Now supports custom publishers by using the
<cite>publisher</cite> argument.</p>
</li>
<li><p class="first">Added <a class="reference internal" href="../configuration.html#std:setting-CELERY_SEND_TASK_SENT_EVENT"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_SEND_TASK_SENT_EVENT</span></code></a> setting.</p>
<blockquote>
<div><p>If enabled an event will be sent with every task, so monitors can
track tasks before the workers receive them.</p>
</div></blockquote>
</li>
<li><dl class="first docutils">
<dt><cite>celerybeat</cite>: Now reuses the broker connection when calling</dt>
<dd><p class="first last">scheduled tasks.</p>
</dd>
</dl>
</li>
<li><p class="first">The configuration module and loader to use can now be specified on
the command-line.</p>
<blockquote>
<div><p>For example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ celery worker --config<span class="o">=</span>celeryconfig.py --loader<span class="o">=</span>myloader.Loader
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Added signals: <cite>beat_init</cite> and <cite>beat_embedded_init</cite></p>
<blockquote>
<div><ul>
<li><p class="first"><code class="xref std std-signal docutils literal"><span class="pre">celery.signals.beat_init</span></code></p>
<blockquote>
<div><p>Dispatched when <strong class="program">celerybeat</strong> starts (either standalone or
embedded).  Sender is the <a class="reference internal" href="../reference/celery.beat.html#celery.beat.Service" title="celery.beat.Service"><code class="xref py py-class docutils literal"><span class="pre">celery.beat.Service</span></code></a> instance.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="xref std std-signal docutils literal"><span class="pre">celery.signals.beat_embedded_init</span></code></p>
<blockquote>
<div><p>Dispatched in addition to the <a class="reference internal" href="../userguide/signals.html#std:signal-beat_init"><code class="xref std std-signal docutils literal"><span class="pre">beat_init</span></code></a> signal when
<strong class="program">celerybeat</strong> is started as an embedded process.  Sender
is the <a class="reference internal" href="../reference/celery.beat.html#celery.beat.Service" title="celery.beat.Service"><code class="xref py py-class docutils literal"><span class="pre">celery.beat.Service</span></code></a> instance.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Redis result backend: Removed deprecated settings <cite>REDIS_TIMEOUT</cite> and
<cite>REDIS_CONNECT_RETRY</cite>.</p>
</li>
<li><p class="first">CentOS init script for <strong class="program">celery worker</strong> now available in <cite>extra/centos</cite>.</p>
</li>
<li><p class="first">Now depends on <cite>pyparsing</cite> version 1.5.0 or higher.</p>
<blockquote>
<div><p>There have been reported issues using Celery with pyparsing 1.4.x,
so please upgrade to the latest version.</p>
</div></blockquote>
</li>
<li><p class="first">Lots of new unit tests written, now with a total coverage of 95%.</p>
</li>
</ul>
</div>
<div class="section" id="v220-fixes">
<span id="id18"></span><h3><a class="toc-backref" href="#id40">Fixes</a><a class="headerlink" href="#v220-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><cite>celeryev</cite> Curses Monitor: Improved resize handling and UI layout
(<a class="reference external" href="https://github.com/celery/celery/issues/274"><span class="xref issue">Issue #274</span></a> + <a class="reference external" href="https://github.com/celery/celery/issues/276"><span class="xref issue">Issue #276</span></a>)</p>
</li>
<li><p class="first">AMQP Backend: Exceptions occurring while sending task results are now
propagated instead of silenced.</p>
<blockquote>
<div><p>the worker will then show the full traceback of these errors in the log.</p>
</div></blockquote>
</li>
<li><p class="first">AMQP Backend: No longer deletes the result queue after successful
poll, as this should be handled by the
<code class="xref std std-setting docutils literal"><span class="pre">CELERY_AMQP_TASK_RESULT_EXPIRES</span></code> setting instead.</p>
</li>
<li><p class="first">AMQP Backend: Now ensures queues are declared before polling results.</p>
</li>
<li><p class="first">Windows: worker: Show error if running with <cite>-B</cite> option.</p>
<blockquote>
<div><p>Running celerybeat embedded is known not to work on Windows, so
users are encouraged to run celerybeat as a separate service instead.</p>
</div></blockquote>
</li>
<li><p class="first">Windows: Utilities no longer output ANSI color codes on Windows</p>
</li>
<li><p class="first">camqadm: Now properly handles Ctrl+C by simply exiting instead of showing
confusing traceback.</p>
</li>
<li><p class="first">Windows: All tests are now passing on Windows.</p>
</li>
<li><p class="first">Remove bin/ directory, and <cite>scripts</cite> section from setup.py.</p>
<blockquote>
<div><p>This means we now rely completely on setuptools entrypoints.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="experimental">
<span id="v220-experimental"></span><h3><a class="toc-backref" href="#id41">Experimental</a><a class="headerlink" href="#experimental" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Jython: worker now runs on Jython using the threaded pool.</p>
<blockquote>
<div><p>All tests pass, but there may still be bugs lurking around the corners.</p>
</div></blockquote>
</li>
<li><p class="first">PyPy: worker now runs on PyPy.</p>
<blockquote>
<div><p>It runs without any pool, so to get parallel execution you must start
multiple instances (e.g. using <strong class="program">multi</strong>).</p>
<p>Sadly an initial benchmark seems to show a 30% performance decrease on
pypy-1.4.1 + JIT.  We would like to find out why this is, so stay tuned.</p>
</div></blockquote>
</li>
<li><p class="first"><code class="xref py py-class docutils literal"><span class="pre">PublisherPool</span></code>: Experimental pool of task publishers and
connections to be used with the <cite>retry</cite> argument to <cite>apply_async</cite>.</p>
<p>The example code below will re-use connections and channels, and
retry sending of the task message if the connection is lost.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery</span> <span class="kn">import</span> <span class="n">current_app</span>

<span class="c1"># Global pool</span>
<span class="n">pool</span> <span class="o">=</span> <span class="n">current_app</span><span class="p">()</span><span class="o">.</span><span class="n">amqp</span><span class="o">.</span><span class="n">PublisherPool</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">pool</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span> <span class="k">as</span> <span class="n">publisher</span><span class="p">:</span>
        <span class="n">add</span><span class="o">.</span><span class="n">apply_async</span><span class="p">((</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="n">publisher</span><span class="o">=</span><span class="n">publisher</span><span class="p">,</span> <span class="n">retry</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="../index.html">
  <img class="logo" src="http://cloud.github.com/downloads/celery/celery/celery_128.png" alt="Logo"/>
</a></p>
<div id="donate">
    <b>Donations welcome:</b>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHTwYJKoZIhvcNAQcEoIIHQDCCBzwCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYA2+c723xlntHKQYQR9yn9BEtUhDoUUlnOqhniqvNMWB4k2R0JpVkrNSu5JCbdjNOqDXKHoRfIWe3HXJJMPZBJKFMD5Izprb6xEZlTGaWnlrGXFfkdBaILQQgWYqV0DnuNmtDXCvfYmyu0p1K04wLjAJ1ufnBSP1UaS6BTcoIOOuTELMAkGBSsOAwIaBQAwgcwGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIFg/2qPwa7UCAgah20QLIllcp0VHazYo2C9h8c6gn8MTcTnpW0WFXhz9ylc/i5dCXabkrrLBBfg8NygAuvYRr4k1zdC0AJIgsV/6rSAhehabRvjRDH2EZ8OieqHfIPfkAcTm+JqbS6Z27lXkebYPnJzhkZxW7+ZC6hU/H40JFXChTag8lhqJfZELiOZLWxxilj2mkwlkdMx1YL6lcPAA7ajpAwjsnJYd/9VxLA6MDmcOu+TKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xNTEyMTAxOTEzMzBaMCMGCSqGSIb3DQEJBDEWBBTUno4gI/mmaVaGVpgB/CWwQd3DeDANBgkqhkiG9w0BAQEFAASBgFmZ1j1Ss/FNl/JRIOakhBJEdm2KGLH0d2ewwTYIgIkEKSdc5Rg2/2xFS/dglcs5Te3R2GzaqjGlNSKldsk/MgZP/BudpHAASQ09hrfDy5TaBlRRl1Yu0WzGBKcVm/WRh0v2TVV8vBHVGiJD+aY5epgRXXI/XUKD0bp8tVV1T7LS-----END PKCS7-----
    ">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="changelog-2.3.html"
                        title="previous chapter">Change history for Celery 2.3</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changelog-2.1.html"
                        title="next chapter">Change history for Celery 2.1</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/history/changelog-2.2.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="changelog-2.1.html" title="Change history for Celery 2.1"
             >next</a> |</li>
        <li class="right" >
          <a href="changelog-2.3.html" title="Change history for Celery 2.3"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Celery 3.1.25 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >History</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="../copyright.html">Copyright</a> 2009-2015, Ask Solem &amp; Contributors.
    </div>
  </body>
</html>