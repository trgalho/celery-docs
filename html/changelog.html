<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Change history &#8212; Celery 3.1.25 documentation</title>
    
    <link rel="stylesheet" href="_static/celery.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '3.1.25',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="What’s new in Celery 3.1 (Cipater)" href="whatsnew-3.1.html" />
    <link rel="prev" title="Frequently Asked Questions" href="faq.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-3.1.html" title="What’s new in Celery 3.1 (Cipater)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="faq.html" title="Frequently Asked Questions"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Celery 3.1.25 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
<div class="deck">

    
        <p>
        This document describes the current stable version of Celery (3.1). For development docs,
        <a href="http://docs.celeryproject.org/en/master/changelog.html">go here</a>.
        </p>
    

</div>
    <div class="section" id="change-history">
<span id="changelog"></span><h1>Change history<a class="headerlink" href="#change-history" title="Permalink to this headline">¶</a></h1>
<p>This document contains change notes for bugfix releases in the 3.1.x series
(Cipater), please see <a class="reference internal" href="whatsnew-3.1.html#whatsnew-3-1"><span class="std std-ref">What&#8217;s new in Celery 3.1 (Cipater)</span></a> for an overview of what&#8217;s
new in Celery 3.1.</p>
<div class="section" id="version-3-1-25">
<span id="id1"></span><h2>3.1.25<a class="headerlink" href="#version-3-1-25" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-10-10 12:00 PM PDT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-37" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.37</span></a></li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Fixed problem with chords in group introduced in 3.1.24 (<a class="reference external" href="https://github.com/celery/celery/issues/3504"><span class="xref issue">Issue #3504</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-24">
<span id="id2"></span><h2>3.1.24<a class="headerlink" href="#version-3-1-24" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-09-30 04:21 PM PDT</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-36" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.36</span></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Now supports Task protocol 2 from the future 4.0 release.</p>
<blockquote>
<div><p>Workers running 3.1.24 are now able to process messages
sent using the <a class="reference external" href="http://docs.celeryproject.org/en/master/internals/protocol.html#version-2">new task message protocol</a> to be introduced
in Celery 4.0.</p>
<p>Users upgrading to Celery 4.0 when this is released are encouraged
to upgrade to this version as an intermediate step, as this
means workers not yet upgraded will be able to process
messages from clients/workers running 4.0.</p>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">Task.send_events</span></code> can now be set to disable sending of events
for that task only.</p>
<blockquote>
<div><p>Example when defining the task:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">send_events</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Utils</strong>: Fixed compatibility with recent <a href="#id3"><span class="problematic" id="id4">:pypi:`psutil`</span></a> versions
(<a class="reference external" href="https://github.com/celery/celery/issues/3262"><span class="xref issue">Issue #3262</span></a>).</p>
</li>
<li><p class="first"><strong>Canvas</strong>: Chord now forwards partial arguments to its subtasks.</p>
<blockquote>
<div><p>Fix contributed by Tayfun Sen.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>App</strong>: Arguments to app such as <code class="docutils literal"><span class="pre">backend</span></code>, <code class="docutils literal"><span class="pre">broker</span></code>, etc
are now pickled and sent to the child processes on Windows.</p>
<blockquote>
<div><p>Fix contributed by Jeremy Zafran.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Deployment</strong>: Generic init scripts now supports being symlinked
in runlevel directories (<a class="reference external" href="https://github.com/celery/celery/issues/3208"><span class="xref issue">Issue #3208</span></a>).</p>
</li>
<li><p class="first"><strong>Deployment</strong>: Updated CentOS scripts to work with CentOS 7.</p>
<blockquote>
<div><p>Contributed by Joe Sanford.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Events</strong>: The curses monitor no longer crashes when the
result of a task is empty.</p>
<blockquote>
<div><p>Fix contributed by Dongweiming.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: <code class="docutils literal"><span class="pre">repr(worker)</span></code> would crash when called early
in the startup process (<a class="reference external" href="https://github.com/celery/celery/issues/2514"><span class="xref issue">Issue #2514</span></a>).</p>
</li>
<li><p class="first"><strong>Tasks</strong>: GroupResult now defines __bool__ and __nonzero__.</p>
<blockquote>
<div><p>This is to fix an issue where a ResultSet or GroupResult with an empty
result list are not properly tupled with the as_tuple() method when it is
a parent result. This is due to the as_tuple() method performing a logical
and operation on the ResultSet.</p>
<p>Fix contributed by Colin McIntosh.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Fixed wrong values in autoscale related logging message.</p>
<blockquote>
<div><p>Fix contributed by <code class="docutils literal"><span class="pre">&#64;raducc</span></code>.</p>
</div></blockquote>
</li>
<li><p class="first">Documentation improvements by</p>
<blockquote>
<div><ul class="simple">
<li>Alexandru Chirila</li>
<li>Michael Aquilina</li>
<li>Mikko Ekström</li>
<li>Mitchel Humpherys</li>
<li>Thomas A. Neil</li>
<li>Tiago Moreira Vieira</li>
<li>Yuriy Syrovetskiy</li>
<li><code class="docutils literal"><span class="pre">&#64;dessant</span></code></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-23">
<span id="id5"></span><h2>3.1.23<a class="headerlink" href="#version-3-1-23" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-03-09 06:00 P.M PST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>Programs</strong>: Last release broke support for the <code class="docutils literal"><span class="pre">--hostnmame</span></code> argument
to <strong class="program">celery multi</strong> and <strong class="program">celery worker --detach</strong>
(<a class="reference external" href="https://github.com/celery/celery/issues/3103"><span class="xref issue">Issue #3103</span></a>).</li>
<li><strong>Results</strong>: MongoDB result backend could crash the worker at startup
if not configured using an URL.</li>
</ul>
</div>
<div class="section" id="version-3-1-22">
<span id="id6"></span><h2>3.1.22<a class="headerlink" href="#version-3-1-22" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-03-07 01:30 P.M PST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>Programs</strong>: The worker would crash immediately on startup on
<code class="docutils literal"><span class="pre">backend.as_uri()</span></code> when using some result backends (<a class="reference external" href="https://github.com/celery/celery/issues/3094"><span class="xref issue">Issue #3094</span></a>).</li>
<li><strong>Programs</strong>: <strong class="program">celery multi</strong>/<strong class="program">celery worker --detach</strong>
would create an extraneous logfile including literal formats (e.g. <code class="docutils literal"><span class="pre">%I</span></code>)
in the filename (<a class="reference external" href="https://github.com/celery/celery/issues/3096"><span class="xref issue">Issue #3096</span></a>).</li>
</ul>
</div>
<div class="section" id="version-3-1-21">
<span id="id7"></span><h2>3.1.21<a class="headerlink" href="#version-3-1-21" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-03-04 11:16 A.M PST</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-34" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.34</span></a>.</li>
<li>Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.23.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Fixes 100% CPU loop on Linux epoll (<a class="reference external" href="https://github.com/celery/celery/issues/1845"><span class="xref issue">Issue #1845</span></a>).</p>
<blockquote>
<div><p>Also potential fix for: <a class="reference external" href="https://github.com/celery/celery/issues/2142"><span class="xref issue">Issue #2142</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/2606"><span class="xref issue">Issue #2606</span></a></p>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Fixes memory leak related to processes exiting
(<a class="reference external" href="https://github.com/celery/celery/issues/2927"><span class="xref issue">Issue #2927</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Fixes crash at startup when trying to censor passwords
in MongoDB and Cache result backend URLs (<a class="reference external" href="https://github.com/celery/celery/issues/3079"><span class="xref issue">Issue #3079</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/3045"><span class="xref issue">Issue #3045</span></a>,
<a class="reference external" href="https://github.com/celery/celery/issues/3049"><span class="xref issue">Issue #3049</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/3068"><span class="xref issue">Issue #3068</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/3073"><span class="xref issue">Issue #3073</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Maxime Verger.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: An exception is now raised if countdown/expires is less
than -2147483648 (<a class="reference external" href="https://github.com/celery/celery/issues/3078"><span class="xref issue">Issue #3078</span></a>).</p>
</li>
<li><p class="first"><strong>Programs</strong>: <strong class="program">celery shell --ipython</strong> now compatible with newer
IPython versions.</p>
</li>
<li><p class="first"><strong>Programs</strong>: The DuplicateNodeName warning emitted by inspect/control
now includes a list of the node names returned.</p>
<blockquote>
<div><p>Contributed by Sebastian Kalinowski.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Utils</strong>: The <code class="docutils literal"><span class="pre">.discard(item)</span></code> method of
<a class="reference internal" href="internals/reference/celery.datastructures.html#celery.datastructures.LimitedSet" title="celery.datastructures.LimitedSet"><code class="xref py py-class docutils literal"><span class="pre">LimitedSet</span></code></a> did not actually remove the item
(<a class="reference external" href="https://github.com/celery/celery/issues/3087"><span class="xref issue">Issue #3087</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Dave Smith.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Node name formatting now emits less confusing error message
for unmatched format keys (<a class="reference external" href="https://github.com/celery/celery/issues/3016"><span class="xref issue">Issue #3016</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: amqp/rpc backends: Fixed deserialization of JSON exceptions
(<a class="reference external" href="https://github.com/celery/celery/issues/2518"><span class="xref issue">Issue #2518</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Allard Hoeve.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: The <cite>process inqueue damaged</cite> error message now includes
the original exception raised.</p>
</li>
<li><p class="first"><strong>Documentation</strong>: Includes improvements by:</p>
<blockquote>
<div><ul class="simple">
<li>Jeff Widman.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-20">
<span id="id8"></span><h2>3.1.20<a class="headerlink" href="#version-3-1-20" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2016-01-22 06:50 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-33" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.33</span></a>.</p>
</li>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.22.</p>
<blockquote>
<div><p>Includes binary wheels for Microsoft Windows x86 and x86_64!</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: Error emails now uses <code class="docutils literal"><span class="pre">utf-8</span></code> charset by default (<a class="reference external" href="https://github.com/celery/celery/issues/2737"><span class="xref issue">Issue #2737</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: Retry now forwards original message headers (<a class="reference external" href="https://github.com/celery/celery/issues/3017"><span class="xref issue">Issue #3017</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Bootsteps can now hook into <code class="docutils literal"><span class="pre">on_node_join</span></code>/<code class="docutils literal"><span class="pre">leave</span></code>/<code class="docutils literal"><span class="pre">lost</span></code>.</p>
<blockquote>
<div><p>See <span class="xref std std-ref">extending-consumer-gossip</span> for an example.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Events</strong>: Fixed handling of DST timezones (<a class="reference external" href="https://github.com/celery/celery/issues/2983"><span class="xref issue">Issue #2983</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Redis backend stopped respecting certain settings.</p>
<blockquote>
<div><p>Contributed by Jeremy Llewellyn.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: Database backend now properly supports JSON exceptions
(<a class="reference external" href="https://github.com/celery/celery/issues/2441"><span class="xref issue">Issue #2441</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Redis <code class="docutils literal"><span class="pre">new_join</span></code> did not properly call task errbacks on chord
error (<a class="reference external" href="https://github.com/celery/celery/issues/2796"><span class="xref issue">Issue #2796</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Restores Redis compatibility with redis-py &lt; 2.10.0
(<a class="reference external" href="https://github.com/celery/celery/issues/2903"><span class="xref issue">Issue #2903</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Fixed rare issue with chord error handling (<a class="reference external" href="https://github.com/celery/celery/issues/2409"><span class="xref issue">Issue #2409</span></a>).</p>
</li>
<li><p class="first"><strong>Tasks</strong>: Using queue-name values in <a class="reference internal" href="configuration.html#std:setting-CELERY_ROUTES"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_ROUTES</span></code></a> now works
again (<a class="reference external" href="https://github.com/celery/celery/issues/2987"><span class="xref issue">Issue #2987</span></a>).</p>
</li>
<li><p class="first"><strong>General</strong>: Result backend password now sanitized in report output
(<a class="reference external" href="https://github.com/celery/celery/issues/2812"><span class="xref issue">Issue #2812</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/2004"><span class="xref issue">Issue #2004</span></a>).</p>
</li>
<li><p class="first"><strong>Configuration</strong>: Now gives helpful error message when the result backend
configuration points to a module, and not a class (<a class="reference external" href="https://github.com/celery/celery/issues/2945"><span class="xref issue">Issue #2945</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Exceptions sent by JSON serialized workers are now properly
handled by pickle configured workers.</p>
</li>
<li><p class="first"><strong>Programs</strong>: <code class="docutils literal"><span class="pre">celery</span> <span class="pre">control</span> <span class="pre">autoscale</span></code> now works (<a class="reference external" href="https://github.com/celery/celery/issues/2950"><span class="xref issue">Issue #2950</span></a>).</p>
</li>
<li><p class="first"><strong>Programs</strong>: <code class="docutils literal"><span class="pre">celery</span> <span class="pre">beat</span> <span class="pre">--detached</span></code> now runs after fork callbacks.</p>
</li>
<li><p class="first"><strong>General</strong>: Fix for LRU cache implementation on Python 3.5 (<a class="reference external" href="https://github.com/celery/celery/issues/2897"><span class="xref issue">Issue #2897</span></a>).</p>
<blockquote>
<div><p>Contributed by Dennis Brakhane.</p>
<p>Python 3.5&#8217;s <code class="docutils literal"><span class="pre">OrderedDict</span></code> does not allow mutation while it is being
iterated over. This breaks &#8220;update&#8221; if it is called with a dict
larger than the maximum size.</p>
<p>This commit changes the code to a version that does not iterate over
the dict, and should also be a little bit faster.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Init scripts</strong>: The beat init script now properly reports service as down
when no pid file can be found.</p>
<blockquote>
<div><p>Eric Zarowny</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Beat</strong>: Added cleaning of corrupted scheduler files for some storage
backend errors (<a class="reference external" href="https://github.com/celery/celery/issues/2985"><span class="xref issue">Issue #2985</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Aleksandr Kuznetsov.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Beat</strong>: Now syncs the schedule even if the schedule is empty.</p>
<blockquote>
<div><p>Fix contributed by Colin McIntosh.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Supervisord</strong>: Set higher process priority in supervisord example.</p>
<blockquote>
<div><p>Contributed by George Tantiras.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Documentation</strong>: Includes improvements by:</p>
<blockquote>
<div><ul class="simple">
<li>Bryson</li>
<li>Caleb Mingle</li>
<li>Christopher Martin</li>
<li>Dieter Adriaenssens</li>
<li>Jason Veatch</li>
<li>Jeremy Cline</li>
<li>Juan Rossi</li>
<li>Kevin Harvey</li>
<li>Kevin McCarthy</li>
<li>Kirill Pavlov</li>
<li>Marco Buttu</li>
<li>Mayflower</li>
<li>Mher Movsisyan</li>
<li>Michael Floering</li>
<li>michael-k</li>
<li>Nathaniel Varona</li>
<li>Rudy Attias</li>
<li>Ryan Luckie</li>
<li>Steven Parker</li>
<li>squfrans</li>
<li>Tadej Janež</li>
<li>TakesxiSximada</li>
<li>Tom S</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-19">
<span id="id9"></span><h2>3.1.19<a class="headerlink" href="#version-3-1-19" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2015-10-26 01:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-29" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.29</span></a>.</li>
<li>Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.21.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: Fixed MongoDB result backend URL parsing problem
(Issue celery/kombu#375).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Task request now properly sets <code class="docutils literal"><span class="pre">priority</span></code> in delivery_info.</p>
<blockquote>
<div><p>Fix contributed by Gerald Manipon.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Beat</strong>: PyPy shelve may raise <code class="docutils literal"><span class="pre">KeyError</span></code> when setting keys
(<a class="reference external" href="https://github.com/celery/celery/issues/2862"><span class="xref issue">Issue #2862</span></a>).</p>
</li>
<li><p class="first"><strong>Programs</strong>: <strong class="program">celery beat --deatched</strong> now working on PyPy.</p>
<blockquote>
<div><p>Fix contributed by Krzysztof Bujniewicz.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: Redis result backend now ensures all pipelines are cleaned up.</p>
<blockquote>
<div><p>Contributed by Justin Patrin.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: Redis result backend now allows for timeout to be set in the
query portion of the result backend URL.</p>
<blockquote>
<div><p>E.g. <code class="docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span> <span class="pre">=</span> <span class="pre">'redis://?timeout=10'</span></code></p>
<p>Contributed by Justin Patrin.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: <code class="docutils literal"><span class="pre">result.get</span></code> now properly handles failures where the
exception value is set to <code class="xref py py-const docutils literal"><span class="pre">None</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/2560"><span class="xref issue">Issue #2560</span></a>).</p>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Fixed attribute error <code class="docutils literal"><span class="pre">proc.dead</span></code>.</p>
</li>
<li><p class="first"><strong>Worker</strong>: Fixed worker hanging when gossip/heartbeat disabled
(<a class="reference external" href="https://github.com/celery/celery/issues/1847"><span class="xref issue">Issue #1847</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Aaron Webber and Bryan Helmig.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: MongoDB result backend now supports pymongo 3.x
(<a class="reference external" href="https://github.com/celery/celery/issues/2744"><span class="xref issue">Issue #2744</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Sukrit Khera.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: RPC/amqp backends did not deserialize exceptions properly
(<a class="reference external" href="https://github.com/celery/celery/issues/2691"><span class="xref issue">Issue #2691</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Sukrit Khera.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Programs</strong>: Fixed problem with <strong class="program">celery amqp</strong>&#8216;s
<code class="docutils literal"><span class="pre">basic_publish</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/2013"><span class="xref issue">Issue #2013</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Embedded beat now properly sets app for thread/process
(<a class="reference external" href="https://github.com/celery/celery/issues/2594"><span class="xref issue">Issue #2594</span></a>).</p>
</li>
<li><p class="first"><strong>Documentation</strong>: Many improvements and typos fixed.</p>
<blockquote>
<div><p>Contributions by:</p>
<blockquote>
<div><p>Carlos Garcia-Dubus
D. Yu
jerry
Jocelyn Delalande
Josh Kupershmidt
Juan Rossi
kanemra
Paul Pearce
Pavel Savchenko
Sean Wang
Seungha Kim
Zhaorong Ma</p>
</div></blockquote>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-18">
<span id="id10"></span><h2>3.1.18<a class="headerlink" href="#version-3-1-18" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2015-04-22 05:30 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-25" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.25</span></a>.</li>
<li>Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.20.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Django</strong>: Now supports Django 1.8 (<a class="reference external" href="https://github.com/celery/celery/issues/2536"><span class="xref issue">Issue #2536</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Bence Tamas and Mickaël Penhard.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: MongoDB result backend now compatible with pymongo 3.0.</p>
<blockquote>
<div><p>Fix contributed by Fatih Sucu.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Tasks</strong>: Fixed bug only happening when a task has multiple callbacks
(<a class="reference external" href="https://github.com/celery/celery/issues/2515"><span class="xref issue">Issue #2515</span></a>).</p>
<blockquote>
<div><p>Fix contributed by NotSqrt.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands</strong>: Preload options now support <code class="docutils literal"><span class="pre">--arg</span> <span class="pre">value</span></code> syntax.</p>
<blockquote>
<div><p>Fix contributed by John Anderson.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Compat</strong>: A typo caused <code class="docutils literal"><span class="pre">celery.log.setup_logging_subsystem</span></code> to be
undefined.</p>
<blockquote>
<div><p>Fix contributed by Gunnlaugur Thor Briem.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>init scripts</strong>: The celerybeat generic init script now uses
<code class="docutils literal"><span class="pre">/bin/sh</span></code> instead of bash (<a class="reference external" href="https://github.com/celery/celery/issues/2496"><span class="xref issue">Issue #2496</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Jelle Verstraaten.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Django</strong>: Fixed a <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#TypeError" title="(in Python v3.11)"><code class="xref py py-exc docutils literal"><span class="pre">TypeError</span></code></a> sometimes occurring in logging
when validating models.</p>
<blockquote>
<div><p>Fix contributed by Alexander.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands</strong>: Worker now supports new <code class="docutils literal"><span class="pre">--executable</span></code> argument that can
be used with <code class="docutils literal"><span class="pre">--detach</span></code>.</p>
<blockquote>
<div><p>Contributed by Bert Vanderbauwhede.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: Fixed crash in chord unlock fallback task (<a class="reference external" href="https://github.com/celery/celery/issues/2404"><span class="xref issue">Issue #2404</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Fixed rare crash occurring with <code class="docutils literal"><span class="pre">--autoscale</span></code> enabled
(<a class="reference external" href="https://github.com/celery/celery/issues/2411"><span class="xref issue">Issue #2411</span></a>).</p>
</li>
<li><p class="first"><strong>Django</strong>: Properly recycle worker Django database connections when the
Django <code class="docutils literal"><span class="pre">CONN_MAX_AGE</span></code> setting is enabled (<a class="reference external" href="https://github.com/celery/celery/issues/2453"><span class="xref issue">Issue #2453</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Luke Burden.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-17">
<span id="id11"></span><h2>3.1.17<a class="headerlink" href="#version-3-1-17" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-11-19 03:30 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="admonition-do-not-enable-the-setting-celeryd-force-execv-setting admonition">
<p class="first admonition-title">Do not enable the <code class="xref std std-setting docutils literal"><span class="pre">CELERYD_FORCE_EXECV</span></code> setting!</p>
<p>Please review your configuration and disable this option if you&#8217;re using the
RabbitMQ or Redis transport.</p>
<p class="last">Keeping this option enabled after 3.1 means the async based prefork pool will
be disabled, which can easily cause instability.</p>
</div>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-24" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.24</span></a>.</p>
<blockquote>
<div><p>Includes the new Qpid transport coming in Celery 3.2, backported to
support those who may still require Python 2.6 compatibility.</p>
</div></blockquote>
</li>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.19.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">celery[librabbitmq]</span></code> now depends on librabbitmq 1.6.1.</p>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: The timing of ETA/countdown tasks were off after the example <code class="docutils literal"><span class="pre">LocalTimezone</span></code>
implementation in the Python documentation no longer works in Python 3.4.
(<a class="reference external" href="https://github.com/celery/celery/issues/2306"><span class="xref issue">Issue #2306</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: Raising <a class="reference internal" href="reference/celery.exceptions.html#celery.exceptions.Ignore" title="celery.exceptions.Ignore"><code class="xref py py-exc docutils literal"><span class="pre">Ignore</span></code></a> no longer sends
<code class="docutils literal"><span class="pre">task-failed</span></code> event (<a class="reference external" href="https://github.com/celery/celery/issues/2365"><span class="xref issue">Issue #2365</span></a>).</p>
</li>
<li><p class="first"><strong>Redis result backend</strong>: Fixed unbound local errors.</p>
<blockquote>
<div><p>Fix contributed by Thomas French.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: Callbacks was not called properly if <code class="docutils literal"><span class="pre">link</span></code> was a list of
signatures (Issuse #2350).</p>
</li>
<li><p class="first"><strong>Canvas</strong>: chain and group now handles json serialized signatures
(<a class="reference external" href="https://github.com/celery/celery/issues/2076"><span class="xref issue">Issue #2076</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: <code class="docutils literal"><span class="pre">.join_native()</span></code> would accidentally treat the <code class="docutils literal"><span class="pre">STARTED</span></code>
state as being ready (<a class="reference external" href="https://github.com/celery/celery/issues/2326"><span class="xref issue">Issue #2326</span></a>).</p>
<blockquote>
<div><p>This could lead to the chord callback being called with invalid arguments
when using chords with the <a class="reference internal" href="configuration.html#std:setting-CELERY_TRACK_STARTED"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_TRACK_STARTED</span></code></a> setting
enabled.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: The <code class="docutils literal"><span class="pre">chord_size</span></code> attribute is now set for all canvas primitives,
making sure more combinations will work with the <code class="docutils literal"><span class="pre">new_join</span></code> optimization
for Redis (<a class="reference external" href="https://github.com/celery/celery/issues/2339"><span class="xref issue">Issue #2339</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: Fixed problem with app not being properly propagated to
<code class="docutils literal"><span class="pre">trace_task</span></code> in all cases.</p>
<blockquote>
<div><p>Fix contributed by kristaps.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Expires from task message now associated with a timezone.</p>
<blockquote>
<div><p>Fix contributed by Albert Wang.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Cassandra result backend</strong>: Fixed problems when using detailed mode.</p>
<blockquote>
<div><p>When using the Cassandra backend in detailed mode, a regression
caused errors when attempting to retrieve results.</p>
<p>Fix contributed by Gino Ledesma.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Mongodb Result backend</strong>: Pickling the backend instance will now include
the original url (<a class="reference external" href="https://github.com/celery/celery/issues/2347"><span class="xref issue">Issue #2347</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Sukrit Khera.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: Exception info was not properly set for tasks raising
<code class="xref py py-exc docutils literal"><span class="pre">Reject</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/2043"><span class="xref issue">Issue #2043</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Duplicates are now removed when loading the set of revoked tasks
from the worker state database (<a class="reference external" href="https://github.com/celery/celery/issues/2336"><span class="xref issue">Issue #2336</span></a>).</p>
</li>
<li><p class="first"><strong>celery.contrib.rdb</strong>: Fixed problems with <code class="docutils literal"><span class="pre">rdb.set_trace</span></code> calling stop
from the wrong frame.</p>
<blockquote>
<div><p>Fix contributed by llllllllll.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: <code class="docutils literal"><span class="pre">chain</span></code> and <code class="docutils literal"><span class="pre">chord</span></code> can now be immutable.</p>
</li>
<li><p class="first"><strong>Canvas</strong>: <code class="docutils literal"><span class="pre">chord.apply_async</span></code> will now keep partial args set in
<code class="docutils literal"><span class="pre">self.args</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/2299"><span class="xref issue">Issue #2299</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Small refactoring so that results are decoded the same way in
all result backends.</p>
</li>
<li><p class="first"><strong>Logging</strong>: The <code class="docutils literal"><span class="pre">processName</span></code> format was introduced in Py2.6.2 so for
compatibility this format is now excluded when using earlier versions
(<a class="reference external" href="https://github.com/celery/celery/issues/1644"><span class="xref issue">Issue #1644</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-16">
<span id="id12"></span><h2>3.1.16<a class="headerlink" href="#version-3-1-16" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-10-03 06:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Worker</strong>: 3.1.15 broke <code class="docutils literal"><span class="pre">-Ofair</span></code> behavior (<a class="reference external" href="https://github.com/celery/celery/issues/2286"><span class="xref issue">Issue #2286</span></a>).</p>
<blockquote>
<div><p>This regression could result in all tasks executing
in a single child process if <code class="docutils literal"><span class="pre">-Ofair</span></code> was enabled.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: <code class="docutils literal"><span class="pre">celery.signature</span></code> now properly forwards app argument
in all cases.</p>
</li>
<li><p class="first"><strong>Task</strong>: <code class="docutils literal"><span class="pre">.retry()</span></code> did not raise the exception correctly
when called without a current exception.</p>
<blockquote>
<div><p>Fix contributed by Andrea Rabbaglietti.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: The <code class="docutils literal"><span class="pre">enable_events</span></code> remote control command
disabled worker-related events by mistake (<a class="reference external" href="https://github.com/celery/celery/issues/2272"><span class="xref issue">Issue #2272</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Konstantinos Koukopoulos.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Django</strong>: Adds support for Django 1.7 class names in INSTALLED_APPS
when using <code class="docutils literal"><span class="pre">app.autodiscover_tasks()</span></code>  (<a class="reference external" href="https://github.com/celery/celery/issues/2248"><span class="xref issue">Issue #2248</span></a>).</p>
</li>
<li><p class="first"><strong>Sphinx</strong>: <code class="docutils literal"><span class="pre">celery.contrib.sphinx</span></code> now uses <code class="docutils literal"><span class="pre">getfullargspec</span></code>
on Python 3 (<a class="reference external" href="https://github.com/celery/celery/issues/2302"><span class="xref issue">Issue #2302</span></a>).</p>
</li>
<li><p class="first"><strong>Redis/Cache Backends</strong>: Chords will now run at most once if one or more tasks
in the chord are executed multiple times for some reason.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-15">
<span id="id13"></span><h2>3.1.15<a class="headerlink" href="#version-3-1-15" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-09-14 11:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><strong>Django</strong>: Now makes sure <code class="docutils literal"><span class="pre">django.setup()</span></code> is called
before importing any task modules (Django 1.7 compatibility, <a class="reference external" href="https://github.com/celery/celery/issues/2227"><span class="xref issue">Issue #2227</span></a>)</li>
<li><strong>Results</strong>: <code class="docutils literal"><span class="pre">result.get()</span></code> was misbehaving by calling
<code class="docutils literal"><span class="pre">backend.get_task_meta</span></code> in a finally call leading to
AMQP result backend queues not being properly cleaned up (<a class="reference external" href="https://github.com/celery/celery/issues/2245"><span class="xref issue">Issue #2245</span></a>).</li>
</ul>
</div>
<div class="section" id="version-3-1-14">
<span id="id14"></span><h2>3.1.14<a class="headerlink" href="#version-3-1-14" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-09-08 03:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-22" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.22</span></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Init scripts</strong>: The generic worker init scripts <code class="docutils literal"><span class="pre">status</span></code> command
now gets an accurate pidfile list (<a class="reference external" href="https://github.com/celery/celery/issues/1942"><span class="xref issue">Issue #1942</span></a>).</p>
</li>
<li><dl class="first docutils">
<dt><strong>Init scripts</strong>: The generic beat script now implements the <code class="docutils literal"><span class="pre">status</span></code></dt>
<dd><p class="first">command.</p>
<blockquote class="last">
<div><p>Contributed by John Whitlock.</p>
</div></blockquote>
</dd>
</dl>
</li>
<li><p class="first"><strong>Commands</strong>: Multi now writes informational output to stdout instead of stderr.</p>
</li>
<li><p class="first"><strong>Worker</strong>: Now ignores not implemented error for <code class="docutils literal"><span class="pre">pool.restart</span></code>
(<a class="reference external" href="https://github.com/celery/celery/issues/2153"><span class="xref issue">Issue #2153</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: Retry no longer raises retry exception when executed in eager
mode (<a class="reference external" href="https://github.com/celery/celery/issues/2164"><span class="xref issue">Issue #2164</span></a>).</p>
</li>
<li><p class="first"><strong>AMQP Result backend</strong>: Now ensured <code class="docutils literal"><span class="pre">on_interval</span></code> is called at least
every second for blocking calls to properly propagate parent errors.</p>
</li>
<li><p class="first"><strong>Django</strong>: Compatibility with Django 1.7 on Windows (<a class="reference external" href="https://github.com/celery/celery/issues/2126"><span class="xref issue">Issue #2126</span></a>).</p>
</li>
<li><p class="first"><strong>Programs</strong>: <cite>&#8211;umask</cite> argument can be now specified in both octal (if starting
with 0) or decimal.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-13">
<span id="id15"></span><h2>3.1.13<a class="headerlink" href="#version-3-1-13" title="Permalink to this headline">¶</a></h2>
<div class="section" id="security-fixes">
<h3>Security Fixes<a class="headerlink" href="#security-fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">[Security: <a class="reference external" href="http://github.com/celery/celery/tree/master/docs/sec/CELERYSA-0002.txt">CELERYSA-0002</a>] Insecure default umask.</p>
<blockquote>
<div><p>The built-in utility used to daemonize the Celery worker service sets
an insecure umask by default (umask 0).</p>
<p>This means that any files or directories created by the worker will
end up having world-writable permissions.</p>
<p>Special thanks to Red Hat for originally discovering and reporting the
issue!</p>
<p>This version will no longer set a default umask by default, so if unset
the umask of the parent process will be used.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="news">
<h3>News<a class="headerlink" href="#news" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-21" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.21</span></a>.</li>
<li>Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.18.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>App</strong>: <code class="docutils literal"><span class="pre">backend</span></code> argument now also sets the <a class="reference internal" href="configuration.html#std:setting-CELERY_RESULT_BACKEND"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_RESULT_BACKEND</span></code></a>
setting.</p>
</li>
<li><p class="first"><strong>Task</strong>: <code class="docutils literal"><span class="pre">signature_from_request</span></code> now propagates <code class="docutils literal"><span class="pre">reply_to</span></code> so that
the RPC backend works with retried tasks (<a class="reference external" href="https://github.com/celery/celery/issues/2113"><span class="xref issue">Issue #2113</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: <code class="docutils literal"><span class="pre">retry</span></code> will no longer attempt to requeue the task if sending
the retry message fails.</p>
<blockquote>
<div><p>Unrelated exceptions being raised could cause a message loop, so it was
better to remove this behavior.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Beat</strong>: Accounts for standard 1ms drift by always waking up 0.010s
earlier.</p>
<blockquote>
<div><p>This will adjust the latency so that the periodic tasks will not move
1ms after every invocation.</p>
</div></blockquote>
</li>
<li><p class="first">Documentation fixes</p>
<blockquote>
<div><p>Contributed by Yuval Greenfield, Lucas Wiman, nicholsonjf</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Removed an outdated assert statement that could lead to errors
being masked (<a class="reference external" href="https://github.com/celery/celery/issues/2086"><span class="xref issue">Issue #2086</span></a>).</p>
</li>
</ul>
</div>
</div>
<div class="section" id="version-3-1-12">
<span id="id16"></span><h2>3.1.12<a class="headerlink" href="#version-3-1-12" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-06-09 10:12 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong></p>
<blockquote>
<div><p>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-19" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.19</span></a>.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>App</strong>: Connections were not being closed after fork due to an error in the
after fork handler (<a class="reference external" href="https://github.com/celery/celery/issues/2055"><span class="xref issue">Issue #2055</span></a>).</p>
<blockquote>
<div><p>This could manifest itself by causing framing errors when using RabbitMQ.
(<code class="docutils literal"><span class="pre">Unexpected</span> <span class="pre">frame</span></code>).</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Django</strong>: <code class="docutils literal"><span class="pre">django.setup()</span></code> was being called too late when
using Django 1.7 (<a class="reference external" href="https://github.com/celery/celery/issues/1802"><span class="xref issue">Issue #1802</span></a>).</p>
</li>
<li><p class="first"><strong>Django</strong>: Fixed problems with event timezones when using Django
(<code class="docutils literal"><span class="pre">Substantial</span> <span class="pre">drift</span></code>).</p>
<blockquote>
<div><p>Celery did not take into account that Django modifies the
<code class="docutils literal"><span class="pre">time.timeone</span></code> attributes and friends.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: <code class="docutils literal"><span class="pre">Signature.link</span></code> now works when the link option is a scalar
value (<a class="reference external" href="https://github.com/celery/celery/issues/2019"><span class="xref issue">Issue #2019</span></a>).</p>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Fixed race conditions for when file descriptors are
removed from the event loop.</p>
<blockquote>
<div><p>Fix contributed by Roger Hu.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Improved solution for dividing tasks between child
processes.</p>
<blockquote>
<div><p>This change should improve performance when there are many child
processes, and also decrease the chance that two subsequent tasks are
written to the same child process.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Now ignores unknown event types, instead of crashing.</p>
<blockquote>
<div><p>Fix contributed by Illes Solt.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Programs</strong>: <strong class="program">celery worker --detach</strong> no longer closes open file
descriptors when <span class="target" id="index-0"></span><code class="xref std std-envvar docutils literal"><span class="pre">C_FAKEFORK</span></code> is used so that the workers output
can be seen.</p>
</li>
<li><p class="first"><strong>Programs</strong>: The default working directory for <strong class="program">celery worker
--detach</strong> is now the current working directory, not <code class="docutils literal"><span class="pre">/</span></code>.</p>
</li>
<li><p class="first"><strong>Canvas</strong>: <code class="docutils literal"><span class="pre">signature(s,</span> <span class="pre">app=app)</span></code> did not upgrade serialized signatures
to their original class (<code class="docutils literal"><span class="pre">subtask_type</span></code>) when the <code class="docutils literal"><span class="pre">app</span></code> keyword argument
was used.</p>
</li>
<li><p class="first"><strong>Control</strong>: The <code class="docutils literal"><span class="pre">duplicate</span> <span class="pre">nodename</span></code> warning emitted by control commands
now shows the duplicate node name.</p>
</li>
<li><p class="first"><strong>Tasks</strong>: Can now call <code class="docutils literal"><span class="pre">ResultSet.get()</span></code> on a result set without members.</p>
<blockquote>
<div><p>Fix contributed by Alexey Kotlyarov.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>App</strong>: Fixed strange traceback mangling issue for
<code class="docutils literal"><span class="pre">app.connection_or_acquire</span></code>.</p>
</li>
<li><p class="first"><strong>Programs</strong>: The <strong class="program">celery multi stopwait</strong> command is now documented
in usage.</p>
</li>
<li><p class="first"><strong>Other</strong>: Fixed cleanup problem with <code class="docutils literal"><span class="pre">PromiseProxy</span></code> when an error is
raised while trying to evaluate the promise.</p>
</li>
<li><p class="first"><strong>Other</strong>: The utility used to censor configuration values now handles
non-string keys.</p>
<blockquote>
<div><p>Fix contributed by Luke Pomfrey.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Other</strong>: The <code class="docutils literal"><span class="pre">inspect</span> <span class="pre">conf</span></code> command did not handle non-string keys well.</p>
<blockquote>
<div><p>Fix contributed by Jay Farrimond.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Programs</strong>: Fixed argument handling problem in
<strong class="program">celery worker --detach</strong>.</p>
<blockquote>
<div><p>Fix contributed by Dmitry Malinovsky.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Programs</strong>: <strong class="program">celery worker --detach</strong> did not forward working
directory option (<a class="reference external" href="https://github.com/celery/celery/issues/2003"><span class="xref issue">Issue #2003</span></a>).</p>
</li>
<li><p class="first"><strong>Programs</strong>: <strong class="program">celery inspect registered</strong> no longer includes
the list of built-in tasks.</p>
</li>
<li><p class="first"><strong>Worker</strong>: The <code class="docutils literal"><span class="pre">requires</span></code> attribute for boot steps were not being handled
correctly (<a class="reference external" href="https://github.com/celery/celery/issues/2002"><span class="xref issue">Issue #2002</span></a>).</p>
</li>
<li><p class="first"><strong>Eventlet</strong>: The eventlet pool now supports the <code class="docutils literal"><span class="pre">pool_grow</span></code> and
<code class="docutils literal"><span class="pre">pool_shrink</span></code> remote control commands.</p>
<blockquote>
<div><p>Contributed by Mher Movsisyan.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Eventlet</strong>: The eventlet pool now implements statistics for
:program:<code class="docutils literal"><span class="pre">celery</span> <span class="pre">inspect</span> <span class="pre">stats</span></code>.</p>
<blockquote>
<div><p>Contributed by Mher Movsisyan.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Documentation</strong>: Clarified <code class="docutils literal"><span class="pre">Task.rate_limit</span></code> behavior.</p>
<blockquote>
<div><p>Contributed by Jonas Haag.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Documentation</strong>: <code class="docutils literal"><span class="pre">AbortableTask</span></code> examples now updated to use the new
API (<a class="reference external" href="https://github.com/celery/celery/issues/1993"><span class="xref issue">Issue #1993</span></a>).</p>
</li>
<li><p class="first"><strong>Documentation</strong>: The security documentation examples used an out of date
import.</p>
<blockquote>
<div><p>Fix contributed by Ian Dees.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Init scripts</strong>: The CentOS init scripts did not quote
<span class="target" id="index-1"></span><code class="xref std std-envvar docutils literal"><span class="pre">CELERY_CHDIR</span></code>.</p>
<blockquote>
<div><p>Fix contributed by ffeast.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-11">
<span id="id17"></span><h2>3.1.11<a class="headerlink" href="#version-3-1-11" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-04-16 11:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Now compatible with RabbitMQ 3.3.0</strong></p>
<blockquote>
<div><p>You need to run Celery 3.1.11 or later when using RabbitMQ 3.3,
and if you use the <code class="docutils literal"><span class="pre">librabbitmq</span></code> module you also have to upgrade
to librabbitmq 1.5.0:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ pip install -U librabbitmq
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Requirements</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-15" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.15</span></a>.</li>
<li>Now depends on <a class="reference external" href="https://github.com/celery/billiard/blob/master/CHANGES.txt">billiard 3.3.0.17</a>.</li>
<li>Bundle <code class="docutils literal"><span class="pre">celery[librabbitmq]</span></code> now depends on <code class="xref py py-mod docutils literal"><span class="pre">librabbitmq</span></code> 1.5.0.</li>
</ul>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first"><strong>Tasks</strong>: The <a class="reference internal" href="configuration.html#std:setting-CELERY_DEFAULT_DELIVERY_MODE"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_DEFAULT_DELIVERY_MODE</span></code></a> setting was being
ignored (<a class="reference external" href="https://github.com/celery/celery/issues/1953"><span class="xref issue">Issue #1953</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: New <code class="xref std std-option docutils literal"><span class="pre">--heartbeat-interval</span></code> can be used to change the
time (in seconds) between sending event heartbeats.</p>
<blockquote>
<div><p>Contributed by Matthew Duggan and Craig Northway.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>App</strong>: Fixed memory leaks occurring when creating lots of temporary
app instances (<a class="reference external" href="https://github.com/celery/celery/issues/1949"><span class="xref issue">Issue #1949</span></a>).</p>
</li>
<li><p class="first"><strong>MongoDB</strong>: SSL configuration with non-MongoDB transport breaks MongoDB
results backend (<a class="reference external" href="https://github.com/celery/celery/issues/1973"><span class="xref issue">Issue #1973</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Brian Bouterse.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Logging</strong>: The color formatter accidentally modified <code class="docutils literal"><span class="pre">record.msg</span></code>
(<a class="reference external" href="https://github.com/celery/celery/issues/1939"><span class="xref issue">Issue #1939</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: Fixed problem with task trails being stored multiple times,
causing <code class="docutils literal"><span class="pre">result.collect()</span></code> to hang (<a class="reference external" href="https://github.com/celery/celery/issues/1936"><span class="xref issue">Issue #1936</span></a>, <a class="reference external" href="https://github.com/celery/celery/issues/1943"><span class="xref issue">Issue #1943</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: <code class="docutils literal"><span class="pre">ResultSet</span></code> now implements a <code class="docutils literal"><span class="pre">.backend</span></code> attribute for
compatibility with <code class="docutils literal"><span class="pre">AsyncResult</span></code>.</p>
</li>
<li><p class="first"><strong>Results</strong>: <code class="docutils literal"><span class="pre">.forget()</span></code> now also clears the local cache.</p>
</li>
<li><p class="first"><strong>Results</strong>: Fixed problem with multiple calls to <code class="docutils literal"><span class="pre">result._set_cache</span></code>
(<a class="reference external" href="https://github.com/celery/celery/issues/1940"><span class="xref issue">Issue #1940</span></a>).</p>
</li>
<li><p class="first"><strong>Results</strong>: <code class="docutils literal"><span class="pre">join_native</span></code> populated result cache even if disabled.</p>
</li>
<li><p class="first"><strong>Results</strong>: The YAML result serializer should now be able to handle storing
exceptions.</p>
</li>
<li><p class="first"><strong>Worker</strong>: No longer sends task error emails for expected errors (in
<code class="docutils literal"><span class="pre">&#64;task(throws=(...,</span> <span class="pre">)))</span></code>.</p>
</li>
<li><p class="first"><strong>Canvas</strong>: Fixed problem with exception deserialization when using
the JSON serializer (<a class="reference external" href="https://github.com/celery/celery/issues/1987"><span class="xref issue">Issue #1987</span></a>).</p>
</li>
<li><p class="first"><strong>Eventlet</strong>: Fixes crash when <code class="docutils literal"><span class="pre">celery.contrib.batches</span></code> attempted to
cancel a non-existing timer (<a class="reference external" href="https://github.com/celery/celery/issues/1984"><span class="xref issue">Issue #1984</span></a>).</p>
</li>
<li><p class="first">Can now import <code class="docutils literal"><span class="pre">celery.version_info_t</span></code>, and <code class="docutils literal"><span class="pre">celery.five</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/1968"><span class="xref issue">Issue #1968</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-10">
<span id="id18"></span><h2>3.1.10<a class="headerlink" href="#version-3-1-10" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-03-22 09:40 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-14" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.14</span></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>:</p>
<blockquote>
<div><p>Reliability improvements to the SQLAlchemy database backend. Previously the
connection from the MainProcess was improperly shared with the workers.
(<a class="reference external" href="https://github.com/celery/celery/issues/1786"><span class="xref issue">Issue #1786</span></a>)</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Redis:</strong> Important note about events (<a class="reference external" href="https://github.com/celery/celery/issues/1882"><span class="xref issue">Issue #1882</span></a>).</p>
<blockquote>
<div><p>There is a new transport option for Redis that enables monitors
to filter out unwanted events.  Enabling this option in the workers
will increase performance considerably:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">BROKER_TRANSPORT_OPTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;fanout_patterns&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>
</div>
<p>Enabling this option means that your workers will not be able to see
workers with the option disabled (or is running an older version of
Celery), so if you do enable it then make sure you do so on all
nodes.</p>
<p>See <a class="reference internal" href="getting-started/brokers/redis.html#redis-caveats"><span class="std std-ref">Caveats</span></a>.</p>
<p>This will be the default in Celery 3.2.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results</strong>: The <a class="reference internal" href="reference/celery.result.html#celery.result.AsyncResult" title="celery.result.AsyncResult"><code class="xref py py-class docutils literal"><span class="pre">app.AsyncResult</span></code></a> object now keeps a local cache
of the final state of the task.</p>
<blockquote>
<div><p>This means that the global result cache can finally be disabled,
and you can do so by setting <a class="reference internal" href="configuration.html#std:setting-CELERY_MAX_CACHED_RESULTS"><code class="xref std std-setting docutils literal"><span class="pre">CELERY_MAX_CACHED_RESULTS</span></code></a> to
<code class="xref py py-const docutils literal"><span class="pre">-1</span></code>.  The lifetime of the cache will then be bound to the
lifetime of the result object, which will be the default behavior
in Celery 3.2.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Events</strong>: The &#8220;Substantial drift&#8221; warning message is now logged once
per node name only (<a class="reference external" href="https://github.com/celery/celery/issues/1802"><span class="xref issue">Issue #1802</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Ability to use one log file per child process when using the
prefork pool.</p>
<blockquote>
<div><p>This can be enabled by using the new <code class="docutils literal"><span class="pre">%i</span></code> and <code class="docutils literal"><span class="pre">%I</span></code> format specifiers
for the log file name.  See <a class="reference internal" href="userguide/workers.html#worker-files-process-index"><span class="std std-ref">Prefork pool process index</span></a>.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Redis</strong>: New experimental chord join implementation.</p>
<blockquote>
<div><p>This is an optimization for chords when using the Redis result backend,
where the join operation is now considerably faster and using less
resources than the previous strategy.</p>
<p>The new option can be set in the result backend URL:</p>
<blockquote>
<div><p>CELERY_RESULT_BACKEND = &#8216;redis://localhost?new_join=1&#8217;</p>
</div></blockquote>
<p>This must be enabled manually as it&#8217;s incompatible
with workers and clients not using it, so be sure to enable
the option in all clients and workers if you decide to use it.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Multi</strong>: With <code class="docutils literal"><span class="pre">-opt:index</span></code> (e.g. <code class="xref std std-option docutils literal"><span class="pre">-c:1</span></code>) the index now always refers
to the position of a node in the argument list.</p>
<blockquote>
<div><p>This means that referring to a number will work when specifying a list
of node names and not just for a number range:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>celery multi start A B C D -c:1 <span class="m">4</span> -c:2-4 <span class="m">8</span>
</pre></div>
</div>
<p>In this example <code class="docutils literal"><span class="pre">1</span></code> refers to node A (as it&#8217;s the first node in the
list).</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Signals</strong>: The sender argument to <code class="docutils literal"><span class="pre">Signal.connect</span></code> can now be a proxy
object, which means that it can be used with the task decorator
(<a class="reference external" href="https://github.com/celery/celery/issues/1873"><span class="xref issue">Issue #1873</span></a>).</p>
</li>
<li><p class="first"><strong>Task</strong>: A regression caused the <code class="docutils literal"><span class="pre">queue</span></code> argument to <code class="docutils literal"><span class="pre">Task.retry</span></code> to be
ignored (<a class="reference external" href="https://github.com/celery/celery/issues/1892"><span class="xref issue">Issue #1892</span></a>).</p>
</li>
<li><p class="first"><strong>App</strong>: Fixed error message for <code class="xref py py-meth docutils literal"><span class="pre">config_from_envvar()</span></code>.</p>
<blockquote>
<div><p>Fix contributed by Dmitry Malinovsky.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas</strong>: Chords can now contain a group of other chords (<a class="reference external" href="https://github.com/celery/celery/issues/1921"><span class="xref issue">Issue #1921</span></a>).</p>
</li>
<li><p class="first"><strong>Canvas</strong>: Chords can now be combined when using the amqp result backend
(a chord where the callback is also a chord).</p>
</li>
<li><p class="first"><strong>Canvas</strong>: Calling <code class="docutils literal"><span class="pre">result.get()</span></code> for a chain task will now complete
even if one of the tasks in the chain is <code class="docutils literal"><span class="pre">ignore_result=True</span></code>
(<a class="reference external" href="https://github.com/celery/celery/issues/1905"><span class="xref issue">Issue #1905</span></a>).</p>
</li>
<li><p class="first"><strong>Canvas</strong>: Worker now also logs chord errors.</p>
</li>
<li><p class="first"><strong>Canvas</strong>: A chord task raising an exception will now result in
any errbacks (<code class="docutils literal"><span class="pre">link_error</span></code>) to the chord callback to also be called.</p>
</li>
<li><p class="first"><strong>Results</strong>: Reliability improvements to the SQLAlchemy database backend
(<a class="reference external" href="https://github.com/celery/celery/issues/1786"><span class="xref issue">Issue #1786</span></a>).</p>
<blockquote>
<div><p>Previously the connection from the <code class="docutils literal"><span class="pre">MainProcess</span></code> was improperly
inherited by child processes.</p>
<p>Fix contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: Task callbacks and errbacks are now called using the group
primitive.</p>
</li>
<li><p class="first"><strong>Task</strong>: <code class="docutils literal"><span class="pre">Task.apply</span></code> now properly sets <code class="docutils literal"><span class="pre">request.headers</span></code>
(<a class="reference external" href="https://github.com/celery/celery/issues/1874"><span class="xref issue">Issue #1874</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Fixed <code class="docutils literal"><span class="pre">UnicodeEncodeError</span></code> occuring when worker is started
by <cite>supervisord</cite>.</p>
<blockquote>
<div><p>Fix contributed by Codeb Fan.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Beat</strong>: No longer attempts to upgrade a newly created database file
(<a class="reference external" href="https://github.com/celery/celery/issues/1923"><span class="xref issue">Issue #1923</span></a>).</p>
</li>
<li><p class="first"><strong>Beat</strong>: New setting :setting:<code class="docutils literal"><span class="pre">CELERYBEAT_SYNC_EVERY</span></code> can be be used
to control file sync by specifying the number of tasks to send between
each sync.</p>
<blockquote>
<div><p>Contributed by Chris Clark.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands</strong>: <strong class="program">celery inspect memdump</strong> no longer crashes
if the <code class="xref py py-mod docutils literal"><span class="pre">psutil</span></code> module is not installed (<a class="reference external" href="https://github.com/celery/celery/issues/1914"><span class="xref issue">Issue #1914</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Remote control commands now always accepts json serialized
messages (<a class="reference external" href="https://github.com/celery/celery/issues/1870"><span class="xref issue">Issue #1870</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Gossip will now drop any task related events it receives
by mistake (<a class="reference external" href="https://github.com/celery/celery/issues/1882"><span class="xref issue">Issue #1882</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-9">
<span id="id19"></span><h2>3.1.9<a class="headerlink" href="#version-3-1-9" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-02-10 06:43 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-12" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.12</span></a>.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Better handling of exiting child processes.</p>
<blockquote>
<div><p>Fix contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Prefork pool</strong>: Now makes sure all file descriptors are removed
from the hub when a process is cleaned up.</p>
<blockquote>
<div><p>Fix contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>New Sphinx extension</strong>: for autodoc documentation of tasks:
<code class="xref py py-mod docutils literal"><span class="pre">celery.contrib.spinx</span></code> (<a class="reference external" href="https://github.com/celery/celery/issues/1833"><span class="xref issue">Issue #1833</span></a>).</p>
</li>
<li><p class="first"><strong>Django</strong>: Now works with Django 1.7a1.</p>
</li>
<li><p class="first"><strong>Task</strong>: Task.backend is now a property that forwards to <code class="docutils literal"><span class="pre">app.backend</span></code>
if no custom backend has been specified for the task (<a class="reference external" href="https://github.com/celery/celery/issues/1821"><span class="xref issue">Issue #1821</span></a>).</p>
</li>
<li><p class="first"><strong>Generic init scripts</strong>: Fixed bug in stop command.</p>
<blockquote>
<div><p>Fix contributed by Rinat Shigapov.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Generic init scripts</strong>: Fixed compatibility with GNU <em class="manpage">stat</em>.</p>
<blockquote>
<div><p>Fix contributed by Paul Kilgo.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Generic init scripts</strong>: Fixed compatibility with the minimal
<strong class="program">dash</strong> shell (<a class="reference external" href="https://github.com/celery/celery/issues/1815"><span class="xref issue">Issue #1815</span></a>).</p>
</li>
<li><p class="first"><strong>Commands</strong>: The <strong class="program">celery amqp basic.publish</strong> command was not
working properly.</p>
<blockquote>
<div><p>Fix contributed by Andrey Voronov.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands</strong>: Did no longer emit an error message if the pidfile exists
and the process is still alive (<a class="reference external" href="https://github.com/celery/celery/issues/1855"><span class="xref issue">Issue #1855</span></a>).</p>
</li>
<li><p class="first"><strong>Commands</strong>: Better error message for missing arguments to preload
options (<a class="reference external" href="https://github.com/celery/celery/issues/1860"><span class="xref issue">Issue #1860</span></a>).</p>
</li>
<li><p class="first"><strong>Commands</strong>: <strong class="program">celery -h</strong> did not work because of a bug in the
argument parser (<a class="reference external" href="https://github.com/celery/celery/issues/1849"><span class="xref issue">Issue #1849</span></a>).</p>
</li>
<li><p class="first"><strong>Worker</strong>: Improved error message for message decoding errors.</p>
</li>
<li><p class="first"><strong>Time</strong>: Now properly parses the <cite>Z</cite> timezone specifier in ISO 8601 date
strings.</p>
<blockquote>
<div><p>Fix contributed by Martin Davidsson.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>: Now uses the <em>negotiated</em> heartbeat value to calculate
how often to run the heartbeat checks.</p>
</li>
<li><p class="first"><strong>Beat</strong>: Fixed problem with beat hanging after the first schedule
iteration (<a class="reference external" href="https://github.com/celery/celery/issues/1822"><span class="xref issue">Issue #1822</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Roger Hu.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Signals</strong>: The header argument to <a class="reference internal" href="userguide/signals.html#std:signal-before_task_publish"><code class="xref std std-signal docutils literal"><span class="pre">before_task_publish</span></code></a> is now
always a dictionary instance so that signal handlers can add headers.</p>
</li>
<li><p class="first"><strong>Worker</strong>: A list of message headers is now included in message related
errors.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-8">
<span id="id20"></span><h2>3.1.8<a class="headerlink" href="#version-3-1-8" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2014-01-17 10:45 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first"><strong>Requirements</strong>:</p>
<blockquote>
<div><ul class="simple">
<li>Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-10" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.10</span></a>.</li>
<li>Now depends on <a class="reference external" href="https://github.com/celery/billiard/blob/master/CHANGES.txt">billiard 3.3.0.14</a>.</li>
</ul>
</div></blockquote>
</li>
</ul>
<ul>
<li><p class="first"><strong>Worker</strong>: The event loop was not properly reinitialized at consumer restart
which would force the worker to continue with a closed <code class="docutils literal"><span class="pre">epoll</span></code> instance on
Linux, resulting in a crash.</p>
</li>
<li><p class="first"><strong>Events:</strong> Fixed issue with both heartbeats and task events that could
result in the data not being kept in sorted order.</p>
<blockquote>
<div><p>As a result this would force the worker to log &#8220;heartbeat missed&#8221;
events even though the remote node was sending heartbeats in a timely manner.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Results:</strong> The pickle serializer no longer converts group results to tuples,
and will keep the original type (<em><a class="reference external" href="https://github.com/celery/celery/issues/1750"><span class="xref issue">Issue #1750</span></a></em>).</p>
</li>
<li><p class="first"><strong>Results:</strong> <code class="docutils literal"><span class="pre">ResultSet.iterate</span></code> is now pending deprecation.</p>
<blockquote>
<div><p>The method will be deprecated in version 3.2 and removed in version 3.3.</p>
<p>Use <code class="docutils literal"><span class="pre">result.get(callback=)</span></code> (or <code class="docutils literal"><span class="pre">result.iter_native()</span></code> where available)
instead.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker</strong>|eventlet/gevent: A regression caused <code class="docutils literal"><span class="pre">Ctrl+C</span></code> to be ineffective
for shutdown.</p>
</li>
<li><p class="first"><strong>Redis result backend:</strong> Now using a pipeline to store state changes
for improved performance.</p>
<blockquote>
<div><p>Contributed by Pepijn de Vos.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Redis result backend:</strong> Will now retry storing the result if disconnected.</p>
</li>
<li><p class="first"><strong>Worker</strong>|gossip: Fixed attribute error occurring when another node leaves.</p>
<blockquote>
<div><p>Fix contributed by Brodie Rao.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Generic init scripts:</strong> Now runs a check at startup to verify
that any configuration scripts are owned by root and that they
are not world/group writeable.</p>
<blockquote>
<div><p>The init script configuration is a shell script executed by root,
so this is a preventive measure to ensure that users do not
leave this file vulnerable to changes by unprivileged users.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Note that upgrading celery will not update the init scripts,
instead you need to manually copy the improved versions from the
source distribution:
<a class="reference external" href="https://github.com/celery/celery/tree/3.1/extra/generic-init.d">https://github.com/celery/celery/tree/3.1/extra/generic-init.d</a></p>
</div>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands</strong>: The <strong class="program">celery purge</strong> command now warns that the operation
will delete all tasks and prompts the user for confirmation.</p>
<blockquote>
<div><p>A new <a class="reference internal" href="reference/celery.bin.base.html#cmdoption-f"><code class="xref std std-option docutils literal"><span class="pre">-f</span></code></a> was added that can be used to disable
interactive mode.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Task</strong>: <code class="docutils literal"><span class="pre">.retry()</span></code> did not raise the value provided in the <code class="docutils literal"><span class="pre">exc</span></code> argument
when called outside of an error context (<em><a class="reference external" href="https://github.com/celery/celery/issues/1755"><span class="xref issue">Issue #1755</span></a></em>).</p>
</li>
<li><p class="first"><strong>Commands:</strong> The <strong class="program">celery multi</strong> command did not forward command
line configuration to the target workers.</p>
<blockquote>
<div><p>The change means that multi will forward the special <code class="docutils literal"><span class="pre">--</span></code> argument and
configuration content at the end of the arguments line to the specified
workers.</p>
<p>Example using command-line configuration to set a broker heartbeat
from <strong class="program">celery multi</strong>:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ celery multi start <span class="m">1</span> -c3 -- broker.heartbeat<span class="o">=</span><span class="m">30</span>
</pre></div>
</div>
<p>Fix contributed by Antoine Legrand.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Canvas:</strong> <code class="docutils literal"><span class="pre">chain.apply_async()</span></code> now properly forwards execution options.</p>
<blockquote>
<div><p>Fix contributed by Konstantin Podshumok.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Redis result backend:</strong> Now takes <code class="docutils literal"><span class="pre">connection_pool</span></code> argument that can be
used to change the connection pool class/constructor.</p>
</li>
<li><p class="first"><strong>Worker:</strong> Now truncates very long arguments and keyword arguments logged by
the pool at debug severity.</p>
</li>
<li><p class="first"><strong>Worker:</strong> The worker now closes all open files on <code class="xref std std-sig docutils literal"><span class="pre">SIGHUP</span></code> (regression)
(<em><a class="reference external" href="https://github.com/celery/celery/issues/1768"><span class="xref issue">Issue #1768</span></a></em>).</p>
<blockquote>
<div><p>Fix contributed by Brodie Rao</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Worker:</strong> Will no longer accept remote control commands while the
worker startup phase is incomplete (<em><a class="reference external" href="https://github.com/celery/celery/issues/1741"><span class="xref issue">Issue #1741</span></a></em>).</p>
</li>
<li><p class="first"><strong>Commands:</strong> The output of the event dump utility
(<strong class="program">celery events -d</strong>) can now be piped into other commands.</p>
</li>
<li><p class="first"><strong>Documentation:</strong> The RabbitMQ installation instructions for OS X was
updated to use modern homebrew practices.</p>
<blockquote>
<div><p>Contributed by Jon Chen.</p>
</div></blockquote>
</li>
<li><p class="first"><strong>Commands:</strong> The <strong class="program">celery inspect conf</strong> utility now works.</p>
</li>
<li><p class="first"><strong>Commands:</strong> The <code class="xref std std-option docutils literal"><span class="pre">-no-color</span></code> argument was not respected by
all commands (<em><a class="reference external" href="https://github.com/celery/celery/issues/1799"><span class="xref issue">Issue #1799</span></a></em>).</p>
</li>
<li><p class="first"><strong>App:</strong> Fixed rare bug with <code class="docutils literal"><span class="pre">autodiscover_tasks()</span></code> (<em><a class="reference external" href="https://github.com/celery/celery/issues/1797"><span class="xref issue">Issue #1797</span></a></em>).</p>
</li>
<li><p class="first"><strong>Distribution:</strong> The sphinx docs will now always add the parent directory
to path so that the current celery source code is used as a basis for
API documentation (<em><a class="reference external" href="https://github.com/celery/celery/issues/1782"><span class="xref issue">Issue #1782</span></a></em>).</p>
</li>
<li><p class="first"><strong>Documentation:</strong> Supervisord examples contained an extraneous &#8216;-&#8216; in a
<cite>&#8211;logfile</cite> argument example.</p>
<blockquote>
<div><p>Fix contributed by Mohammad Almeer.</p>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="version-3-1-7">
<span id="id21"></span><h2>3.1.7<a class="headerlink" href="#version-3-1-7" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-12-17 06:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<div class="section" id="important-notes">
<span id="v317-important"></span><h3>Important Notes<a class="headerlink" href="#important-notes" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="init-script-security-improvements">
<h3>Init script security improvements<a class="headerlink" href="#init-script-security-improvements" title="Permalink to this headline">¶</a></h3>
<p>Where the generic init scripts (for <code class="docutils literal"><span class="pre">celeryd</span></code>, and <code class="docutils literal"><span class="pre">celerybeat</span></code>) before
delegated the responsibility of dropping privileges to the target application,
it will now use <code class="docutils literal"><span class="pre">su</span></code> instead, so that the Python program is not trusted
with superuser privileges.</p>
<p>This is not in reaction to any known exploit, but it will
limit the possibility of a privilege escalation bug being abused in the
future.</p>
<p>You have to upgrade the init scripts manually from this directory:
<a class="reference external" href="https://github.com/celery/celery/tree/3.1/extra/generic-init.d">https://github.com/celery/celery/tree/3.1/extra/generic-init.d</a></p>
<div class="section" id="amqp-result-backend">
<h4>AMQP result backend<a class="headerlink" href="#amqp-result-backend" title="Permalink to this headline">¶</a></h4>
<p>The 3.1 release accidentally left the amqp backend configured to be
non-persistent by default.</p>
<p>Upgrading from 3.0 would give a &#8220;not equivalent&#8221; error when attempting to
set or retrieve results for a task.  That is unless you manually set the
persistence setting:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">CELERY_RESULT_PERSISTENT</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
<p>This version restores the previous value so if you already forced
the upgrade by removing the existing exchange you must either
keep the configuration by setting <code class="docutils literal"><span class="pre">CELERY_RESULT_PERSISTENT</span> <span class="pre">=</span> <span class="pre">False</span></code>
or delete the <code class="docutils literal"><span class="pre">celeryresults</span></code> exchange again.</p>
</div>
<div class="section" id="synchronous-subtasks">
<h4>Synchronous subtasks<a class="headerlink" href="#synchronous-subtasks" title="Permalink to this headline">¶</a></h4>
<p>Tasks waiting for the result of a subtask will now emit
a <a class="reference external" href="https://docs.python.org/dev/library/exceptions.html#RuntimeWarning" title="(in Python v3.11)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeWarning</span></code></a> warning when using the prefork pool,
and in 3.2 this will result in an exception being raised.</p>
<p>It&#8217;s not legal for tasks to block by waiting for subtasks
as this is likely to lead to resource starvation and eventually
deadlock when using the prefork pool (see also <a class="reference internal" href="userguide/tasks.html#task-synchronous-subtasks"><span class="std std-ref">Avoid launching synchronous subtasks</span></a>).</p>
<p>If you really know what you are doing you can avoid the warning (and
the future exception being raised) by moving the operation in a whitelist
block:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">celery.result</span> <span class="kn">import</span> <span class="n">allow_join_result</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span> <span class="nf">misbehaving</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">other_task</span><span class="o">.</span><span class="n">delay</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">allow_join_result</span><span class="p">():</span>
        <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</pre></div>
</div>
<p>Note also that if you wait for the result of a subtask in any form
when using the prefork pool you must also disable the pool prefetching
behavior with the worker <a class="reference internal" href="userguide/optimizing.html#prefork-pool-prefetch"><span class="std std-ref">-Ofair option</span></a>.</p>
</div>
</div>
<div class="section" id="fixes">
<span id="v317-fixes"></span><h3>Fixes<a class="headerlink" href="#fixes" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-8" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.8</span></a>.</p>
</li>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.13</p>
</li>
<li><p class="first">Events: Fixed compatibility with non-standard json libraries
that sends float as <a class="reference external" href="https://docs.python.org/dev/library/decimal.html#decimal.Decimal" title="(in Python v3.11)"><code class="xref py py-class docutils literal"><span class="pre">decimal.Decimal</span></code></a> (<a class="reference external" href="https://github.com/celery/celery/issues/1731"><span class="xref issue">Issue #1731</span></a>)</p>
</li>
<li><p class="first">Events: State worker objects now always defines attributes:
<code class="docutils literal"><span class="pre">active</span></code>, <code class="docutils literal"><span class="pre">processed</span></code>, <code class="docutils literal"><span class="pre">loadavg</span></code>, <code class="docutils literal"><span class="pre">sw_ident</span></code>, <code class="docutils literal"><span class="pre">sw_ver</span></code>
and <code class="docutils literal"><span class="pre">sw_sys</span></code>.</p>
</li>
<li><p class="first">Worker: Now keeps count of the total number of tasks processed,
not just by type (<code class="docutils literal"><span class="pre">all_active_count</span></code>).</p>
</li>
<li><p class="first">Init scripts:  Fixed problem with reading configuration file
when the init script is symlinked to a runlevel (e.g. <code class="docutils literal"><span class="pre">S02celeryd</span></code>).
(<a class="reference external" href="https://github.com/celery/celery/issues/1740"><span class="xref issue">Issue #1740</span></a>).</p>
<blockquote>
<div><p>This also removed a rarely used feature where you can symlink the script
to provide alternative configurations.  You instead copy the script
and give it a new name, but perhaps a better solution is to provide
arguments to <code class="docutils literal"><span class="pre">CELERYD_OPTS</span></code> to separate them:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span><span class="nv">CELERYD_NODES</span><span class="o">=</span><span class="s2">&quot;X1 X2 Y1 Y2&quot;</span>
<span class="nv">CELERYD_OPTS</span><span class="o">=</span><span class="s2">&quot;-A:X1 x -A:X2 x -A:Y1 y -A:Y2 y&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Fallback chord unlock task is now always called after the chord header
(<a class="reference external" href="https://github.com/celery/celery/issues/1700"><span class="xref issue">Issue #1700</span></a>).</p>
<blockquote>
<div><p>This means that the unlock task will not be started if there&#8217;s
an error sending the header.</p>
</div></blockquote>
</li>
<li><p class="first">Celery command: Fixed problem with arguments for some control commands.</p>
<blockquote>
<div><p>Fix contributed by Konstantin Podshumok.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed bug in <code class="docutils literal"><span class="pre">utcoffset</span></code> where the offset when in DST would be
completely wrong (<a class="reference external" href="https://github.com/celery/celery/issues/1743"><span class="xref issue">Issue #1743</span></a>).</p>
</li>
<li><p class="first">Worker: Errors occurring while attempting to serialize the result of a
task will now cause the task to be marked with failure and a
<code class="xref py py-class docutils literal"><span class="pre">kombu.exceptions.EncodingError</span></code> error.</p>
<blockquote>
<div><p>Fix contributed by Ionel Cristian Mărieș.</p>
</div></blockquote>
</li>
<li><p class="first">Worker with <code class="docutils literal"><span class="pre">-B</span></code> argument did not properly shut down the beat instance.</p>
</li>
<li><p class="first">Worker: The <code class="docutils literal"><span class="pre">%n</span></code> and <code class="docutils literal"><span class="pre">%h</span></code> formats are now also supported by the
<a class="reference internal" href="reference/celery.bin.base.html#cmdoption-f"><code class="xref std std-option docutils literal"><span class="pre">--logfile</span></code></a>, <a class="reference internal" href="reference/celery.bin.base.html#cmdoption-pidfile"><code class="xref std std-option docutils literal"><span class="pre">--pidfile</span></code></a> and <code class="xref std std-option docutils literal"><span class="pre">--statedb</span></code> arguments.</p>
<blockquote>
<div><p>Example:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>$ celery -A proj worker -n foo@%h --logfile<span class="o">=</span>%n.log --statedb<span class="o">=</span>%n.db
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">Redis/Cache result backends: Will now timeout if keys evicted while trying
to join a chord.</p>
</li>
<li><p class="first">The fallbock unlock chord task now raises <code class="xref py py-exc docutils literal"><span class="pre">Retry</span></code> so that the
retry even is properly logged by the worker.</p>
</li>
<li><p class="first">Multi: Will no longer apply Eventlet/gevent monkey patches (<a class="reference external" href="https://github.com/celery/celery/issues/1717"><span class="xref issue">Issue #1717</span></a>).</p>
</li>
<li><p class="first">Redis result backend: Now supports UNIX sockets.</p>
<blockquote>
<div><p>Like the Redis broker transport the result backend now also supports
using <code class="docutils literal"><span class="pre">redis+socket:///tmp/redis.sock</span></code> URLs.</p>
<p>Contributed by Alcides Viamontes Esquivel.</p>
</div></blockquote>
</li>
<li><p class="first">Events: Events sent by clients was mistaken for worker related events
(<a class="reference external" href="https://github.com/celery/celery/issues/1714"><span class="xref issue">Issue #1714</span></a>).</p>
<blockquote>
<div><p>For <code class="docutils literal"><span class="pre">events.State</span></code> the tasks now have a <code class="docutils literal"><span class="pre">Task.client</span></code> attribute
that is set when a <code class="docutils literal"><span class="pre">task-sent</span></code> event is being received.</p>
<p>Also, a clients logical clock is not in sync with the cluster so
they live in a &#8220;time bubble&#8221;.  So for this reason monitors will no
longer attempt to merge with the clock of an event sent by a client,
instead it will fake the value by using the current clock with
a skew of -1.</p>
</div></blockquote>
</li>
<li><p class="first">Prefork pool: The method used to find terminated processes was flawed
in that it did not also take into account missing popen objects.</p>
</li>
<li><p class="first">Canvas: <code class="docutils literal"><span class="pre">group</span></code> and <code class="docutils literal"><span class="pre">chord</span></code> now works with anon signatures as long
as the group/chord object is associated with an app instance (<a class="reference external" href="https://github.com/celery/celery/issues/1744"><span class="xref issue">Issue #1744</span></a>).</p>
<blockquote>
<div><p>You can pass the app by using <code class="docutils literal"><span class="pre">group(...,</span> <span class="pre">app=app)</span></code>.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="version-3-1-6">
<span id="id22"></span><h2>3.1.6<a class="headerlink" href="#version-3-1-6" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-12-02 06:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.10.</p>
</li>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-7" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.7</span></a>.</p>
</li>
<li><p class="first">Fixed problem where Mingle caused the worker to hang at startup
(<a class="reference external" href="https://github.com/celery/celery/issues/1686"><span class="xref issue">Issue #1686</span></a>).</p>
</li>
<li><p class="first">Beat: Would attempt to drop privileges twice (<a class="reference external" href="https://github.com/celery/celery/issues/1708"><span class="xref issue">Issue #1708</span></a>).</p>
</li>
<li><p class="first">Windows: Fixed error with <code class="docutils literal"><span class="pre">geteuid</span></code> not being available (<a class="reference external" href="https://github.com/celery/celery/issues/1676"><span class="xref issue">Issue #1676</span></a>).</p>
</li>
<li><p class="first">Tasks can now provide a list of expected error classes (<a class="reference external" href="https://github.com/celery/celery/issues/1682"><span class="xref issue">Issue #1682</span></a>).</p>
<blockquote>
<div><p>The list should only include errors that the task is expected to raise
during normal operation:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="nd">@task</span><span class="p">(</span><span class="n">throws</span><span class="o">=</span><span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="n">HttpNotFound</span><span class="p">))</span>
</pre></div>
</div>
<p>What happens when an exceptions is raised depends on the type of error:</p>
<ul>
<li><p class="first">Expected errors (included in <code class="docutils literal"><span class="pre">Task.throws</span></code>)</p>
<blockquote>
<div><p>Will be logged using severity <code class="docutils literal"><span class="pre">INFO</span></code>, and traceback is excluded.</p>
</div></blockquote>
</li>
<li><p class="first">Unexpected errors</p>
<blockquote>
<div><p>Will be logged using severity <code class="docutils literal"><span class="pre">ERROR</span></code>, with traceback included.</p>
</div></blockquote>
</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Cache result backend now compatible with Python 3 (<a class="reference external" href="https://github.com/celery/celery/issues/1697"><span class="xref issue">Issue #1697</span></a>).</p>
</li>
<li><p class="first">CentOS init script: Now compatible with sys-v style init symlinks.</p>
<blockquote>
<div><p>Fix contributed by Jonathan Jordan.</p>
</div></blockquote>
</li>
<li><p class="first">Events: Fixed problem when task name is not defined (<a class="reference external" href="https://github.com/celery/celery/issues/1710"><span class="xref issue">Issue #1710</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Mher Movsisyan.</p>
</div></blockquote>
</li>
<li><p class="first">Task: Fixed unbound local errors (<a class="reference external" href="https://github.com/celery/celery/issues/1684"><span class="xref issue">Issue #1684</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Markus Ullmann.</p>
</div></blockquote>
</li>
<li><p class="first">Canvas: Now unrolls groups with only one task (optimization) (<a class="reference external" href="https://github.com/celery/celery/issues/1656"><span class="xref issue">Issue #1656</span></a>).</p>
</li>
<li><p class="first">Task: Fixed problem with eta and timezones.</p>
<blockquote>
<div><p>Fix contributed by Alexander Koval.</p>
</div></blockquote>
</li>
<li><p class="first">Django: Worker now performs model validation (<a class="reference external" href="https://github.com/celery/celery/issues/1681"><span class="xref issue">Issue #1681</span></a>).</p>
</li>
<li><p class="first">Task decorator now emits less confusing errors when used with
incorrect arguments (<a class="reference external" href="https://github.com/celery/celery/issues/1692"><span class="xref issue">Issue #1692</span></a>).</p>
</li>
<li><p class="first">Task: New method <code class="docutils literal"><span class="pre">Task.send_event</span></code> can be used to send custom events
to Flower and other monitors.</p>
</li>
<li><p class="first">Fixed a compatibility issue with non-abstract task classes</p>
</li>
<li><p class="first">Events from clients now uses new node name format (<code class="docutils literal"><span class="pre">gen&lt;pid&gt;&#64;&lt;hostname&gt;</span></code>).</p>
</li>
<li><p class="first">Fixed rare bug with Callable not being defined at interpreter shutdown
(<a class="reference external" href="https://github.com/celery/celery/issues/1678"><span class="xref issue">Issue #1678</span></a>).</p>
<blockquote>
<div><p>Fix contributed by Nick Johnson.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed Python 2.6 compatibility (<a class="reference external" href="https://github.com/celery/celery/issues/1679"><span class="xref issue">Issue #1679</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-5">
<span id="id23"></span><h2>3.1.5<a class="headerlink" href="#version-3-1-5" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-21 06:20 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-6" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.6</span></a>.</p>
</li>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.8</p>
</li>
<li><p class="first">App: <code class="docutils literal"><span class="pre">config_from_object</span></code> is now lazy (<a class="reference external" href="https://github.com/celery/celery/issues/1665"><span class="xref issue">Issue #1665</span></a>).</p>
</li>
<li><p class="first">App: <code class="docutils literal"><span class="pre">autodiscover_tasks</span></code> is now lazy.</p>
<blockquote>
<div><p>Django users should now wrap access to the settings object
in a lambda:</p>
<div class="highlight-python3"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">autodiscover_tasks</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">INSTALLED_APPS</span><span class="p">)</span>
</pre></div>
</div>
<p>this ensures that the settings object is not prepared
prematurely.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed regression for <code class="docutils literal"><span class="pre">--app</span></code> argument experienced by
some users (<a class="reference external" href="https://github.com/celery/celery/issues/1653"><span class="xref issue">Issue #1653</span></a>).</p>
</li>
<li><p class="first">Worker: Now respects the <code class="docutils literal"><span class="pre">--uid</span></code> and <code class="docutils literal"><span class="pre">--gid</span></code> arguments
even if <code class="docutils literal"><span class="pre">--detach</span></code> is not enabled.</p>
</li>
<li><p class="first">Beat: Now respects the <code class="docutils literal"><span class="pre">--uid</span></code> and <code class="docutils literal"><span class="pre">--gid</span></code> arguments
even if <code class="docutils literal"><span class="pre">--detach</span></code> is not enabled.</p>
</li>
<li><p class="first">Python 3: Fixed unorderable error occuring with the worker <code class="docutils literal"><span class="pre">-B</span></code>
argument enabled.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">celery.VERSION</span></code> is now a named tuple.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">maybe_signature(list)</span></code> is now applied recursively (<a class="reference external" href="https://github.com/celery/celery/issues/1645"><span class="xref issue">Issue #1645</span></a>).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">celery</span> <span class="pre">shell</span></code> command: Fixed <code class="docutils literal"><span class="pre">IPython.frontend</span></code> deprecation warning.</p>
</li>
<li><p class="first">The default app no longer includes the builtin fixups.</p>
<blockquote>
<div><p>This fixes a bug where <code class="docutils literal"><span class="pre">celery</span> <span class="pre">multi</span></code> would attempt
to load the Django settings module before entering
the target working directory.</p>
</div></blockquote>
</li>
<li><p class="first">The Django daemonization tutorial was changed.</p>
<blockquote>
<div><p>Users no longer have to explicitly export <code class="docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></code>
in <code class="file docutils literal"><span class="pre">/etc/default/celeryd</span></code> when the new project layout is used.</p>
</div></blockquote>
</li>
<li><p class="first">Redis result backend: expiry value can now be 0 (<a class="reference external" href="https://github.com/celery/celery/issues/1661"><span class="xref issue">Issue #1661</span></a>).</p>
</li>
<li><p class="first">Censoring settings now accounts for non-string keys (<a class="reference external" href="https://github.com/celery/celery/issues/1663"><span class="xref issue">Issue #1663</span></a>).</p>
</li>
<li><p class="first">App: New <code class="docutils literal"><span class="pre">autofinalize</span></code> option.</p>
<blockquote>
<div><p>Apps are automatically finalized when the task registry is accessed.
You can now disable this behavior so that an exception is raised
instead.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">Celery</span><span class="p">(</span><span class="n">autofinalize</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># raises RuntimeError</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">tasks</span>

<span class="nd">@app</span><span class="o">.</span><span class="n">task</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span>

<span class="c1"># raises RuntimeError</span>
<span class="n">add</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">finalize</span><span class="p">()</span>
<span class="c1"># no longer raises:</span>
<span class="n">tasks</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">tasks</span>
<span class="n">add</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">The worker did not send monitoring events during shutdown.</p>
</li>
<li><p class="first">Worker: Mingle and gossip is now automatically disabled when
used with an unsupported transport (<a class="reference external" href="https://github.com/celery/celery/issues/1664"><span class="xref issue">Issue #1664</span></a>).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">celery</span></code> command:  Preload options now supports
the rare <code class="docutils literal"><span class="pre">--opt</span> <span class="pre">value</span></code> format (<a class="reference external" href="https://github.com/celery/celery/issues/1668"><span class="xref issue">Issue #1668</span></a>).</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">celery</span></code> command: Accidentally removed options
appearing before the subcommand, these are now moved to the end
instead.</p>
</li>
<li><p class="first">Worker now properly responds to <code class="docutils literal"><span class="pre">inspect</span> <span class="pre">stats</span></code> commands
even if received before startup is complete (<a class="reference external" href="https://github.com/celery/celery/issues/1659"><span class="xref issue">Issue #1659</span></a>).</p>
</li>
<li><p class="first"><a class="reference internal" href="userguide/signals.html#std:signal-task_postrun"><code class="xref std std-signal docutils literal"><span class="pre">task_postrun</span></code></a> is now sent within a finally block, to make
sure the signal is always sent.</p>
</li>
<li><p class="first">Beat: Fixed syntax error in string formatting.</p>
<blockquote>
<div><p>Contributed by nadad.</p>
</div></blockquote>
</li>
<li><p class="first">Fixed typos in the documentation.</p>
<blockquote>
<div><p>Fixes contributed by Loic Bistuer, sunfinite.</p>
</div></blockquote>
</li>
<li><p class="first">Nested chains now works properly when constructed using the
<code class="docutils literal"><span class="pre">chain</span></code> type instead of the <code class="docutils literal"><span class="pre">|</span></code> operator (<a class="reference external" href="https://github.com/celery/celery/issues/1656"><span class="xref issue">Issue #1656</span></a>).</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-4">
<span id="id24"></span><h2>3.1.4<a class="headerlink" href="#version-3-1-4" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-15 11:40 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Now depends on <a class="reference external" href="https://docs.celeryq.dev/projects/kombu/en/latest/changelog.html#version-3-0-5" title="(in Kombu v5.2)"><span class="xref std std-ref">Kombu 3.0.5</span></a>.</p>
</li>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.7</p>
</li>
<li><p class="first">Worker accidentally set a default socket timeout of 5 seconds.</p>
</li>
<li><p class="first">Django: Fixup now sets the default app so that threads will use
the same app instance (e.g. for manage.py runserver).</p>
</li>
<li><p class="first">Worker: Fixed Unicode error crash at startup experienced by some users.</p>
</li>
<li><p class="first">Calling <code class="docutils literal"><span class="pre">.apply_async</span></code> on an empty chain now works again (<a class="reference external" href="https://github.com/celery/celery/issues/1650"><span class="xref issue">Issue #1650</span></a>).</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">celery</span> <span class="pre">multi</span> <span class="pre">show</span></code> command now generates the same arguments
as the start command does.</p>
</li>
<li><p class="first">The <code class="docutils literal"><span class="pre">--app</span></code> argument could end up using a module object instead
of an app instance (with a resulting crash).</p>
</li>
<li><p class="first">Fixed a syntax error problem in the celerybeat init script.</p>
<blockquote>
<div><p>Fix contributed by Vsevolod.</p>
</div></blockquote>
</li>
<li><p class="first">Tests now passing on PyPy 2.1 and 2.2.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-3">
<span id="id25"></span><h2>3.1.3<a class="headerlink" href="#version-3-1-3" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-13 00:55 A.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Fixed compatibility problem with Python 2.7.0 - 2.7.5 (<a class="reference external" href="https://github.com/celery/celery/issues/1637"><span class="xref issue">Issue #1637</span></a>)</p>
<blockquote>
<div><p><code class="docutils literal"><span class="pre">unpack_from</span></code> started supporting <code class="docutils literal"><span class="pre">memoryview</span></code> arguments
in Python 2.7.6.</p>
</div></blockquote>
</li>
<li><p class="first">Worker: <a class="reference external" href="https://docs.python.org/dev/using/cmdline.html#cmdoption-B" title="(in Python v3.11)"><code class="xref std std-option docutils literal"><span class="pre">-B</span></code></a> argument accidentally closed files used
for logging.</p>
</li>
<li><p class="first">Task decorated tasks now keep their docstring (<a class="reference external" href="https://github.com/celery/celery/issues/1636"><span class="xref issue">Issue #1636</span></a>)</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-2">
<span id="id26"></span><h2>3.1.2<a class="headerlink" href="#version-3-1-2" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-12 08:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.6</p>
</li>
<li><p class="first">No longer needs the billiard C extension to be installed.</p>
</li>
<li><p class="first">The worker silently ignored task errors.</p>
</li>
<li><p class="first">Django: Fixed <code class="docutils literal"><span class="pre">ImproperlyConfigured</span></code> error raised
when no database backend specified.</p>
<blockquote>
<div><p>Fix contributed by j0hnsmith</p>
</div></blockquote>
</li>
<li><p class="first">Prefork pool: Now using <code class="docutils literal"><span class="pre">_multiprocessing.read</span></code> with <code class="docutils literal"><span class="pre">memoryview</span></code>
if available.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">close_open_fds</span></code> now uses <code class="docutils literal"><span class="pre">os.closerange</span></code> if available.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">get_fdmax</span></code> now takes value from <code class="docutils literal"><span class="pre">sysconfig</span></code> if possible.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-1">
<span id="id27"></span><h2>3.1.1<a class="headerlink" href="#version-3-1-1" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-11 06:30 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<ul>
<li><p class="first">Now depends on <code class="xref py py-mod docutils literal"><span class="pre">billiard</span></code> 3.3.0.4.</p>
</li>
<li><p class="first">Python 3: Fixed compatibility issues.</p>
</li>
<li><p class="first">Windows:  Accidentally showed warning that the billiard C extension
was not installed (<a class="reference external" href="https://github.com/celery/celery/issues/1630"><span class="xref issue">Issue #1630</span></a>).</p>
</li>
<li><p class="first">Django: Tutorial updated with a solution that sets a default
<span class="target" id="index-2"></span><code class="xref std std-envvar docutils literal"><span class="pre">DJANGO_SETTINGS_MODULE</span></code> so that it doesn&#8217;t have to be typed
in with the <strong class="program">celery</strong> command.</p>
<blockquote>
<div><p>Also fixed typos in the tutorial, and added the settings
required to use the Django database backend.</p>
<p>Thanks to Chris Ward, orarbel.</p>
</div></blockquote>
</li>
<li><p class="first">Django: Fixed a problem when using the Django settings in Django 1.6.</p>
</li>
<li><p class="first">Django: Fixup should not be applied if the django loader is active.</p>
</li>
<li><p class="first">Worker:  Fixed attribute error for <code class="docutils literal"><span class="pre">human_write_stats</span></code> when using the
compatibility prefork pool implementation.</p>
</li>
<li><p class="first">Worker: Fixed compatibility with billiard without C extension.</p>
</li>
<li><p class="first">Inspect.conf: Now supports a <code class="docutils literal"><span class="pre">with_defaults</span></code> argument.</p>
</li>
<li><p class="first">Group.restore: The backend argument was not respected.</p>
</li>
</ul>
</div>
<div class="section" id="version-3-1-0">
<span id="id28"></span><h2>3.1.0<a class="headerlink" href="#version-3-1-0" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">release-date:</th><td class="field-body">2013-11-09 11:00 P.M UTC</td>
</tr>
<tr class="field-even field"><th class="field-name">release-by:</th><td class="field-body">Ask Solem</td>
</tr>
</tbody>
</table>
<p>See <a class="reference internal" href="whatsnew-3.1.html#whatsnew-3-1"><span class="std std-ref">What&#8217;s new in Celery 3.1 (Cipater)</span></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo"><a href="index.html">
  <img class="logo" src="http://cloud.github.com/downloads/celery/celery/celery_128.png" alt="Logo"/>
</a></p>
<div id="donate">
    <b>Donations welcome:</b>
    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
    <input type="hidden" name="cmd" value="_s-xclick">
    <input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----MIIHTwYJKoZIhvcNAQcEoIIHQDCCBzwCAQExggEwMIIBLAIBADCBlDCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20CAQAwDQYJKoZIhvcNAQEBBQAEgYA2+c723xlntHKQYQR9yn9BEtUhDoUUlnOqhniqvNMWB4k2R0JpVkrNSu5JCbdjNOqDXKHoRfIWe3HXJJMPZBJKFMD5Izprb6xEZlTGaWnlrGXFfkdBaILQQgWYqV0DnuNmtDXCvfYmyu0p1K04wLjAJ1ufnBSP1UaS6BTcoIOOuTELMAkGBSsOAwIaBQAwgcwGCSqGSIb3DQEHATAUBggqhkiG9w0DBwQIFg/2qPwa7UCAgah20QLIllcp0VHazYo2C9h8c6gn8MTcTnpW0WFXhz9ylc/i5dCXabkrrLBBfg8NygAuvYRr4k1zdC0AJIgsV/6rSAhehabRvjRDH2EZ8OieqHfIPfkAcTm+JqbS6Z27lXkebYPnJzhkZxW7+ZC6hU/H40JFXChTag8lhqJfZELiOZLWxxilj2mkwlkdMx1YL6lcPAA7ajpAwjsnJYd/9VxLA6MDmcOu+TKgggOHMIIDgzCCAuygAwIBAgIBADANBgkqhkiG9w0BAQUFADCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wHhcNMDQwMjEzMTAxMzE1WhcNMzUwMjEzMTAxMzE1WjCBjjELMAkGA1UEBhMCVVMxCzAJBgNVBAgTAkNBMRYwFAYDVQQHEw1Nb3VudGFpbiBWaWV3MRQwEgYDVQQKEwtQYXlQYWwgSW5jLjETMBEGA1UECxQKbGl2ZV9jZXJ0czERMA8GA1UEAxQIbGl2ZV9hcGkxHDAaBgkqhkiG9w0BCQEWDXJlQHBheXBhbC5jb20wgZ8wDQYJKoZIhvcNAQEBBQADgY0AMIGJAoGBAMFHTt38RMxLXJyO2SmS+Ndl72T7oKJ4u4uw+6awntALWh03PewmIJuzbALScsTS4sZoS1fKciBGoh11gIfHzylvkdNe/hJl66/RGqrj5rFb08sAABNTzDTiqqNpJeBsYs/c2aiGozptX2RlnBktH+SUNpAajW724Nv2Wvhif6sFAgMBAAGjge4wgeswHQYDVR0OBBYEFJaffLvGbxe9WT9S1wob7BDWZJRrMIG7BgNVHSMEgbMwgbCAFJaffLvGbxe9WT9S1wob7BDWZJRroYGUpIGRMIGOMQswCQYDVQQGEwJVUzELMAkGA1UECBMCQ0ExFjAUBgNVBAcTDU1vdW50YWluIFZpZXcxFDASBgNVBAoTC1BheVBhbCBJbmMuMRMwEQYDVQQLFApsaXZlX2NlcnRzMREwDwYDVQQDFAhsaXZlX2FwaTEcMBoGCSqGSIb3DQEJARYNcmVAcGF5cGFsLmNvbYIBADAMBgNVHRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4GBAIFfOlaagFrl71+jq6OKidbWFSE+Q4FqROvdgIONth+8kSK//Y/4ihuE4Ymvzn5ceE3S/iBSQQMjyvb+s2TWbQYDwcp129OPIbD9epdr4tJOUNiSojw7BHwYRiPh58S1xGlFgHFXwrEBb3dgNbMUa+u4qectsMAXpVHnD9wIyfmHMYIBmjCCAZYCAQEwgZQwgY4xCzAJBgNVBAYTAlVTMQswCQYDVQQIEwJDQTEWMBQGA1UEBxMNTW91bnRhaW4gVmlldzEUMBIGA1UEChMLUGF5UGFsIEluYy4xEzARBgNVBAsUCmxpdmVfY2VydHMxETAPBgNVBAMUCGxpdmVfYXBpMRwwGgYJKoZIhvcNAQkBFg1yZUBwYXlwYWwuY29tAgEAMAkGBSsOAwIaBQCgXTAYBgkqhkiG9w0BCQMxCwYJKoZIhvcNAQcBMBwGCSqGSIb3DQEJBTEPFw0xNTEyMTAxOTEzMzBaMCMGCSqGSIb3DQEJBDEWBBTUno4gI/mmaVaGVpgB/CWwQd3DeDANBgkqhkiG9w0BAQEFAASBgFmZ1j1Ss/FNl/JRIOakhBJEdm2KGLH0d2ewwTYIgIkEKSdc5Rg2/2xFS/dglcs5Te3R2GzaqjGlNSKldsk/MgZP/BudpHAASQ09hrfDy5TaBlRRl1Yu0WzGBKcVm/WRh0v2TVV8vBHVGiJD+aY5epgRXXI/XUKD0bp8tVV1T7LS-----END PKCS7-----
    ">
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
    </form>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="faq.html"
                        title="previous chapter">Frequently Asked Questions</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="whatsnew-3.1.html"
                        title="next chapter">What&#8217;s new in Celery 3.1 (Cipater)</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/changelog.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="whatsnew-3.1.html" title="What’s new in Celery 3.1 (Cipater)"
             >next</a> |</li>
        <li class="right" >
          <a href="faq.html" title="Frequently Asked Questions"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Celery 3.1.25 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; <a href="copyright.html">Copyright</a> 2009-2015, Ask Solem &amp; Contributors.
    </div>
  </body>
</html>